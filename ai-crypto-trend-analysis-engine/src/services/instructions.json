{
  "tutorial": {
    "title": "React + Bybit V5 API: Full Indicator Trading Dashboard",
    "overview": "A tutorial to build a React-based trading dashboard that connects to Bybit's V5 API, fetches real-time market data, calculates technical indicators, displays data in charts, and allows users to view and analyze trading signals.",
    "techStack": [
      { "name": "Frontend", "value": "React (Vite recommended)" },
      { "name": "Charting", "value": "Recharts" },
      { "name": "HTTP Client", "value": "Axios or fetch" },
      { "name": "WebSocket", "value": "Bybit V5 WebSocket" },
      { "name": "Indicators", "value": "technicalindicators npm package" },
      { "name": "Authentication", "value": "Bybit API Key + Secret (for private endpoints)" }
    ],
    "projectStructure": "bybit-indicator-dashboard/\n├── public/\n├── src/\n│   ├── components/\n│   │   ├── Chart.jsx\n│   │   ├── IndicatorPanel.jsx\n│   │   ├── OrderForm.jsx\n│   │   └── WebSocketHandler.jsx\n│   ├── services/\n│   │   ├── bybitApi.js\n│   │   └── indicators.js\n│   ├── App.jsx\n│   ├── main.jsx\n│   └── index.css\n├── package.json\n└── vite.config.js (or craco.config.js if using CRA)",
    "steps": [
      {
        "step": 1,
        "title": "Setup React Project",
        "subSteps": [
          {
            "title": "Create React App",
            "description": "Vite is recommended for its speed.",
            "codeSnippet": {
              "language": "bash",
              "code": "npm create vite@latest bybit-indicator-dashboard -- --template react\ncd bybit-indicator-dashboard\nnpm install"
            }
          },
          {
            "title": "Install Dependencies",
            "description": "`ws` is for WebSocket support in Node.js. In the browser, `WebSocket` is built-in.",
            "codeSnippet": {
              "language": "bash",
              "code": "npm install axios recharts technicalindicators ws\n# Optional: For environment variables\nnpm install dotenv"
            }
          }
        ]
      },
      {
        "step": 2,
        "title": "Bybit V5 API Setup",
        "subSteps": [
          {
            "title": "Get API Keys",
            "description": "1. Go to Bybit V5 API management.\n2. Create a V5 API Key (enable 'Read' and 'Trade' if needed).\n3. Save API_KEY and API_SECRET.\n\nSecurity Note: Never expose API_SECRET in frontend. Use a backend proxy or serverless function for private calls.",
            "codeSnippet": null
          }
        ]
      },
      {
        "step": 3,
        "title": "Bybit V5 API Service",
        "subSteps": [
          {
            "title": "Public Endpoints (No Auth Required)",
            "description": "Functions to get candlestick data, ticker, and orderbook.",
            "codeSnippet": {
              "filePath": "src/services/bybitApi.js",
              "language": "javascript",
              "code": "import axios from 'axios';\n\nconst BASE_URL = 'https://api.bybit.com';\nconst V5_PUBLIC = `${BASE_URL}/v5`;\n\nexport const getKlines = async (symbol, interval, limit = 100) => {\n  try {\n    const response = await axios.get(`${V5_PUBLIC}/market/kline`, {\n      params: {\n        category: 'linear',\n        symbol,\n        interval,\n        limit,\n      },\n    });\n    return response.data.result.list;\n  } catch (error) {\n    console.error('Error fetching klines:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\nexport const getTicker = async (symbol) => {\n  try {\n    const response = await axios.get(`${V5_PUBLIC}/market/tickers`, {\n      params: { category: 'linear', symbol },\n    });\n    return response.data.result.list[0];\n  } catch (error) {\n    console.error('Error fetching ticker:', error);\n    throw error;\n  }\n};\n\nexport const getOrderbook = async (symbol, depth = 10) => {\n  try {\n    const response = await axios.get(`${V5_PUBLIC}/market/orderbook`, {\n      params: { category: 'linear', symbol, depth },\n    });\n    return response.data.result;\n  } catch (error) {\n    console.error('Error fetching orderbook:', error);\n    throw error;\n  }\n};"
            }
          },
          {
            "title": "Private Endpoints (Use Backend Proxy)",
            "description": "Never sign requests in the frontend. This example shows a Node.js/Express proxy to place an order.",
            "codeSnippet": {
              "filePath": "backend/server.js",
              "language": "javascript",
              "code": "const express = require('express');\nconst crypto = require('crypto');\nconst axios = require('axios');\nconst app = express();\napp.use(express.json());\n\nconst API_KEY = process.env.BYBIT_API_KEY;\nconst API_SECRET = process.env.BYBIT_API_SECRET;\nconst BASE_URL = 'https://api.bybit.com';\n\napp.post('/api/v5/order/create', async (req, res) => {\n  const { symbol, side, orderType, qty, price } = req.body;\n\n  const timestamp = Date.now();\n  const recvWindow = 5000;\n  const body = { category: 'linear', symbol, side, orderType, qty, price, timeInForce: 'GTC' };\n\n  const signature = crypto\n    .createHmac('sha256', API_SECRET)\n    .update(`${timestamp}${API_KEY}${recvWindow}${JSON.stringify(body)}`)\n    .digest('hex');\n\n  try {\n    const response = await axios.post(`${BASE_URL}/v5/order/create`, body, {\n      headers: {\n        'X-BAPI-API-KEY': API_KEY,\n        'X-BAPI-TIMESTAMP': timestamp,\n        'X-BAPI-RECV-WINDOW': recvWindow,\n        'X-BAPI-SIGN': signature,\n        'Content-Type': 'application/json',\n      },\n    });\n    res.json(response.data);\n  } catch (error) {\n    res.status(500).json({ error: error.response?.data || error.message });\n  }\n});\n\napp.listen(3001, () => console.log('Proxy server running on port 3001'));"
            }
          }
        ]
      },
      {
        "step": 4,
        "title": "Technical Indicators Service",
        "description": "Use the `technicalindicators` package to calculate SMA, EMA, RSI, MACD, and Stochastic Oscillator.",
        "codeSnippet": {
          "filePath": "src/services/indicators.js",
          "language": "javascript",
          "code": "import { SMA, EMA, RSI, MACD, StochasticOscillator } from 'technicalindicators';\n\nconst parseKlines = (klines) => {\n  return klines.map((k) => ({\n    time: parseInt(k[0]) / 1000,\n    open: parseFloat(k[1]),\n    high: parseFloat(k[2]),\n    low: parseFloat(k[3]),\n    close: parseFloat(k[4]),\n    volume: parseFloat(k[5]),\n  }));\n};\n\nexport const calculateSMA = (klines, period = 20) => {\n  const closes = parseKlines(klines).map((k) => k.close);\n  const sma = new SMA({ period, values: closes });\n  return sma.getResult();\n};\n\nexport const calculateEMA = (klines, period = 12) => {\n  const closes = parseKlines(klines).map((k) => k.close);\n  const ema = new EMA({ period, values: closes });\n  return ema.getResult();\n};\n\nexport const calculateRSI = (klines, period = 14) => {\n  const closes = parseKlines(klines).map((k) => k.close);\n  const rsi = new RSI({ period, values: closes });\n  return rsi.getResult();\n};\n\nexport const calculateMACD = (klines, fastPeriod = 12, slowPeriod = 26, signalPeriod = 9) => {\n  const closes = parseKlines(klines).map((k) => k.close);\n  const macdInput = {\n    values: closes,\n    fastPeriod,\n    slowPeriod,\n    signalPeriod,\n    SimpleMAOscillator: false,\n    SimpleMASignal: false,\n  };\n  return MACD.calculate(macdInput);\n};\n\nexport const calculateStochastic = (klines, period = 14) => {\n  const data = parseKlines(klines);\n  const input = {\n    high: data.map((d) => d.high),\n    low: data.map((d) => d.low),\n    close: data.map((d) => d.close),\n    period,\n    signalPeriod: 3,\n  };\n  return StochasticOscillator.calculate(input);\n};"
        }
      },
      {
        "step": 5,
        "title": "Real-Time Data with WebSocket",
        "description": "A component to handle the WebSocket connection and subscribe to ticker data.",
        "codeSnippet": {
          "filePath": "src/components/WebSocketHandler.jsx",
          "language": "jsx",
          "code": "import { useEffect, useState } from 'react';\n\nconst WebSocketHandler = ({ symbol, onPriceUpdate }) => {\n  useEffect(() => {\n    const ws = new WebSocket('wss://stream.bybit.com/v5/public/linear');\n\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      ws.send(JSON.stringify({ op: 'subscribe', args: [`ticker.${symbol}`] }));\n    };\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.topic === `ticker.${symbol}` && data.type === 'snapshot') {\n        const price = parseFloat(data.data.lastPrice);\n        const volume = parseFloat(data.data.volume24h);\n        onPriceUpdate({ price, volume });\n      }\n    };\n\n    ws.onerror = (err) => {\n      console.error('WebSocket error:', err);\n    };\n\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [symbol, onPriceUpdate]);\n\n  return null;\n};\n\nexport default WebSocketHandler;"
        }
      },
      {
        "step": 6,
        "title": "Chart Component with Indicators",
        "description": "A component to display the price chart and technical indicators using Recharts.",
        "codeSnippet": {
          "filePath": "src/components/Chart.jsx",
          "language": "jsx",
          "code": "import { useState, useEffect } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { getKlines, getTicker } from '../services/bybitApi';\nimport { calculateSMA, calculateEMA, calculateRSI, calculateMACD } from '../services/indicators';\nimport WebSocketHandler from './WebSocketHandler';\n\nconst Chart = ({ symbol = 'BTCUSDT', interval = '5' }) => {\n  const [klines, setKlines] = useState([]);\n  const [price, setPrice] = useState(null);\n  const [volume, setVolume] = useState(null);\n  const [indicators, setIndicators] = useState({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await getKlines(symbol, interval, 200);\n        setKlines(data);\n\n        const ticker = await getTicker(symbol);\n        setPrice(parseFloat(ticker.lastPrice));\n        setVolume(parseFloat(ticker.volume24h));\n\n        setIndicators({\n          sma: calculateSMA(data, 20),\n          ema: calculateEMA(data, 12),\n          rsi: calculateRSI(data, 14),\n          macd: calculateMACD(data),\n        });\n      } catch (err) {\n        console.error('Failed to fetch data:', err);\n      }\n    };\n    fetchData();\n    const intervalId = setInterval(fetchData, 60000);\n    return () => clearInterval(intervalId);\n  }, [symbol, interval]);\n\n  const handlePriceUpdate = ({ price, volume }) => {\n    setPrice(price);\n    setVolume(volume);\n  };\n\n  const chartData = klines.slice(-100).map((k, i) => {\n    const time = new Date(parseInt(k[0])).toLocaleTimeString();\n    const close = parseFloat(k[4]);\n    const sma = indicators.sma?.[i] || null;\n    const ema = indicators.ema?.[i] || null;\n    const rsi = indicators.rsi?.[i] || null;\n    const macd = indicators.macd?.[i] || { macd: null, signal: null, histogram: null };\n\n    return {\n      time,\n      close,\n      sma: sma ? +sma.toFixed(2) : null,\n      ema: ema ? +ema.toFixed(2) : null,\n      rsi: rsi ? +rsi.toFixed(2) : null,\n      macd: macd.macd ? +macd.macd.toFixed(2) : null,\n      signal: macd.signal ? +macd.signal.toFixed(2) : null,\n    };\n  });\n\n  return (\n    <div style={{ width: '100%', height: 600 }}>\n      <WebSocketHandler symbol={symbol} onPriceUpdate={handlePriceUpdate} />\n\n      <h2>\n        {symbol} - Last Price: <span style={{ color: price > chartData[chartData.length - 2]?.close ? 'green' : 'red' }}>\n          ${price?.toFixed(2)}\n        </span> | 24h Vol: {volume?.toLocaleString()}\n      </h2>\n\n      <ResponsiveContainer width=\"100%\" height=\"50%\">\n        <LineChart data={chartData}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"time\" />\n          <YAxis domain={['auto', 'auto']} />\n          <Tooltip />\n          <Legend />\n          <Line type=\"monotone\" dataKey=\"close\" stroke=\"#8884d8\" name=\"Price\" />\n          <Line type=\"monotone\" dataKey=\"sma\" stroke=\"#82ca9d\" name=\"SMA(20)\" dot={false} />\n          <Line type=\"monotone\" dataKey=\"ema\" stroke=\"#ff7300\" name=\"EMA(12)\" dot={false} />\n        </LineChart>\n      </ResponsiveContainer>\n\n      {/* RSI Chart */}\n      <ResponsiveContainer width=\"100%\" height=\"20%\">\n        <LineChart data={chartData}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"time\" />\n          <YAxis domain={[0, 100]} />\n          <Tooltip />\n          <Line type=\"monotone\" dataKey=\"rsi\" stroke=\"#ff4d4d\" name=\"RSI\" dot={false} />\n        </LineChart>\n      </ResponsiveContainer>\n\n      {/* MACD Chart */}\n      <ResponsiveContainer width=\"100%\" height=\"20%\">\n        <LineChart data={chartData}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"time\" />\n          <YAxis />\n          <Tooltip />\n          <Line type=\"monotone\" dataKey=\"macd\" stroke=\"#0088FE\" name=\"MACD\" dot={false} />\n          <Line type=\"monotone\" dataKey=\"signal\" stroke=\"#FF8042\" name=\"Signal\" dot={false} />\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n\nexport default Chart;"
        }
      },
      {
        "step": 7,
        "title": "Indicator Panel & Signals",
        "description": "A component to display the latest indicator values and generate a simple trading signal.",
        "codeSnippet": {
          "filePath": "src/components/IndicatorPanel.jsx",
          "language": "jsx",
          "code": "import { useEffect, useState } from 'react';\nimport { calculateRSI, calculateMACD, calculateStochastic } from '../services/indicators';\n\nconst IndicatorPanel = ({ klines }) => {\n  const [rsi, setRsi] = useState(null);\n  const [macd, setMacd] = useState(null);\n  const [stochastic, setStochastic] = useState(null);\n  const [signal, setSignal] = useState('');\n\n  useEffect(() => {\n    if (!klines.length) return;\n\n    const rsiData = calculateRSI(klines, 14);\n    const macdData = calculateMACD(klines);\n    const stochData = calculateStochastic(klines, 14);\n\n    const lastRSI = rsiData[rsiData.length - 1];\n    const lastMACD = macdData[macdData.length - 1];\n    const lastStoch = stochData[stochData.length - 1];\n\n    setRsi(lastRSI);\n    setMacd(lastMACD);\n    setStochastic(lastStoch);\n\n    let signalText = 'HOLD';\n    if (lastRSI < 30) { signalText = 'BUY (RSI Oversold)'; }\n    if (lastRSI > 70) { signalText = 'SELL (RSI Overbought)'; }\n\n    if (lastMACD.macd > lastMACD.signal && lastMACD.histogram > 0) {\n      signalText = 'BUY (MACD Bullish)';\n    }\n    if (lastMACD.macd < lastMACD.signal && lastMACD.histogram < 0) {\n      signalText = 'SELL (MACD Bearish)';\n    }\n\n    if (lastStoch.k < 20 && lastStoch.d < 20) signalText = 'BUY (Stoch Oversold)';\n    if (lastStoch.k > 80 && lastStoch.d > 80) signalText = 'SELL (Stoch Overbought)';\n\n    setSignal(signalText);\n  }, [klines]);\n\n  return (\n    <div style={{ padding: 20, border: '1px solid #ccc', margin: 10, borderRadius: 8 }}>\n      <h3>Technical Indicators & Signals</h3>\n      <p><strong>RSI (14):</strong> {rsi?.toFixed(2) || 'N/A'}</p>\n      <p><strong>MACD:</strong> {macd?.macd?.toFixed(2) || 'N/A'} | Signal: {macd?.signal?.toFixed(2) || 'N/A'}</p>\n      <p><strong>Stochastic:</strong> K={stochastic?.k?.toFixed(2) || 'N/A'}, D={stochastic?.d?.toFixed(2) || 'N/A'}</p>\n      <p><strong>Signal:</strong> <span style={{ color: signal.includes('BUY') ? 'green' : signal.includes('SELL') ? 'red' : 'gray' }}>{signal}</span></p>\n    </div>\n  );\n};\n\nexport default IndicatorPanel;"
        }
      },
      {
        "step": 8,
        "title": "Order Form (Private Action via Proxy)",
        "description": "A form to place an order by sending a request to the backend proxy.",
        "codeSnippet": {
          "filePath": "src/components/OrderForm.jsx",
          "language": "jsx",
          "code": "import { useState } from 'react';\n\nconst OrderForm = ({ symbol, lastPrice }) => {\n  const [side, setSide] = useState('Buy');\n  const [qty, setQty] = useState('');\n  const [orderType, setOrderType] = useState('Market');\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setResult(null);\n\n    const body = {\n      symbol,\n      side: side === 'Buy' ? 'Buy' : 'Sell',\n      orderType,\n      qty,\n      price: orderType === 'Limit' ? lastPrice : undefined,\n    };\n\n    try {\n      const response = await fetch('http://localhost:3001/api/v5/order/create', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(body),\n      });\n      const data = await response.json();\n      setResult(data);\n    } catch (err) {\n      setResult({ error: err.message });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ padding: 20, border: '1px solid #ccc', margin: 10, borderRadius: 8 }}>\n      <h3>Place Order</h3>\n      <form onSubmit={handleSubmit}>\n        <select value={side} onChange={(e) => setSide(e.target.value)}><option>Buy</option><option>Sell</option></select>\n        <select value={orderType} onChange={(e) => setOrderType(e.target.value)}><option>Market</option><option>Limit</option></select>\n        <input type=\"number\" placeholder=\"Quantity\" value={qty} onChange={(e) => setQty(e.target.value)} required step=\"0.01\" />\n        {orderType === 'Limit' && (\n          <input type=\"number\" placeholder=\"Price\" value={lastPrice} readOnly />\n        )}\n        <button type=\"submit\" disabled={loading}>{loading ? 'Placing...' : 'Place Order'}</button>\n      </form>\n      {result && <pre style={{ marginTop: 10, fontSize: 12 }}>{JSON.stringify(result, null, 2)}</pre>}\n    </div>\n  );\n};\n\nexport default OrderForm;"
        }
      },
      {
        "step": 9,
        "title": "App Integration",
        "description": "Combine all components into the main App component.",
        "codeSnippet": {
          "filePath": "src/App.jsx",
          "language": "jsx",
          "code": "import { useState, useEffect } from 'react';\nimport Chart from './components/Chart';\nimport IndicatorPanel from './components/IndicatorPanel';\nimport OrderForm from './components/OrderForm';\nimport { getKlines } from './services/bybitApi';\n\nfunction App() {\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [interval, setInterval] = useState('5');\n  const [klines, setKlines] = useState([]);\n  const [lastPrice, setLastPrice] = useState(0);\n\n  useEffect(() => {\n    const fetchKlines = async () => {\n      const data = await getKlines(symbol, interval, 100);\n      setKlines(data);\n      setLastPrice(parseFloat(data[0][4]));\n    };\n    fetchKlines();\n  }, [symbol, interval]);\n\n  return (\n    <div className=\"App\" style={{ padding: 20, fontFamily: 'Arial' }}>\n      <h1>Bybit V5 Indicator Dashboard</h1>\n\n      <div style={{ marginBottom: 20 }}>\n        <label>Symbol: </label>\n        <select value={symbol} onChange={(e) => setSymbol(e.target.value)}><option>BTCUSDT</option><option>ETHUSDT</option><option>SOLUSDT</option></select>\n        <label style={{ marginLeft: 20 }}>Interval: </label>\n        <select value={interval} onChange={(e) => setInterval(e.target.value)}><option value=\"1\">1m</option><option value=\"5\">5m</option><option value=\"15\">15m</option><option value=\"60\">1h</option></select>\n      </div>\n\n      <Chart symbol={symbol} interval={interval} />\n      <IndicatorPanel klines={klines} />\n      <OrderForm symbol={symbol} lastPrice={lastPrice} />\n    </div>\n  );\n}\n\nexport default App;"
        }
      }
    ],
    "runInstructions": {
      "title": "Run the App",
      "frontend": {
        "title": "Frontend",
        "command": "npm run dev",
        "url": "http://localhost:5173"
      },
      "backend": {
        "title": "Backend (Proxy Server)",
        "command": "node backend/server.js",
        "url": "http://localhost:3001",
        "envSetup": "Set your Bybit API Key and Secret in a `.env` file in the backend directory:\nBYBIT_API_KEY=your_api_key_here\nBYBIT_API_SECRET=your_api_secret_here"
      }
    },
    "securityBestPractices": [
      "Never expose API secret in frontend.",
      "Use HTTPS in production.",
      "Rate limit your backend proxy.",
      "Use CORS properly (`Access-Control-Allow-Origin`).",
      "Validate inputs on backend."
    ],
    "advancedFeatures": [
      "Add candle stick charts using `react-stockcharts`",
      "Add alerts (email/Telegram via webhook)",
      "Add backtesting engine",
      "Add position tracking (via WebSocket)",
      "Support multiple symbols in dashboard"
    ],
    "resources": [
      { "name": "Bybit V5 API Docs", "url": "https://bybit-exchange.github.io/docs/v5/intro" },
      { "name": "Recharts Docs", "url": "https://recharts.org/" },
      { "name": "technicalindicators npm", "url": "https://www.npmjs.com/package/technicalindicators" },
      { "name": "WebSocket API", "url": "https://bybit-exchange.github.io/docs/v5/ws/connect" }
    ],
    "conclusion": "You now have a fully functional React trading dashboard that fetches real-time data from Bybit V5, calculates and displays indicators, shows trading signals, and places orders securely via a backend proxy."
  }
}
