module.exports = {

"[externals]/perf_hooks [external] (perf_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("perf_hooks", () => require("perf_hooks"));

module.exports = mod;
}}),
"[externals]/node:perf_hooks [external] (node:perf_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:perf_hooks", () => require("node:perf_hooks"));

module.exports = mod;
}}),
"[externals]/express [external] (express, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("express", () => require("express"));

module.exports = mod;
}}),
"[externals]/fs/promises [external] (fs/promises, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs/promises", () => require("fs/promises"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/process [external] (process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("process", () => require("process"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[externals]/node:crypto [external] (node:crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}}),
"[externals]/node:async_hooks [external] (node:async_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:async_hooks", () => require("node:async_hooks"));

module.exports = mod;
}}),
"[externals]/async_hooks [external] (async_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("async_hooks", () => require("async_hooks"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/os [external] (os, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}}),
"[externals]/child_process [external] (child_process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/require-in-the-middle [external] (require-in-the-middle, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("require-in-the-middle", () => require("require-in-the-middle"));

module.exports = mod;
}}),
"[externals]/import-in-the-middle [external] (import-in-the-middle, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("import-in-the-middle", () => require("import-in-the-middle"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/http2 [external] (http2, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http2", () => require("http2"));

module.exports = mod;
}}),
"[externals]/dns [external] (dns, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}}),
"[externals]/dgram [external] (dgram, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("dgram", () => require("dgram"));

module.exports = mod;
}}),
"[externals]/assert [external] (assert, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}}),
"[project]/algobots-dashboard/src/ai/genkit.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "ai": (()=>ai)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/genkit/lib/index.mjs [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$genkit$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/genkit/lib/genkit.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$genkit$2d$ai$2f$googleai$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@genkit-ai/googleai/lib/index.mjs [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$genkit$2d$ai$2f$googleai$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@genkit-ai/googleai/lib/index.mjs [app-rsc] (ecmascript) <locals>");
;
;
const ai = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$genkit$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["genkit"])({
    plugins: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$genkit$2d$ai$2f$googleai$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["googleAI"])()
    ],
    model: 'googleai/gemini-2.5-flash',
    enableDevUI: true
});
}}),
"[project]/algobots-dashboard/src/lib/cache.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "withCache": (()=>withCache)
});
const cache = new Map();
function withCache(fn, options = {
    ttl: 60 * 1000
}) {
    return async function(...args) {
        const key = options.getKey ? options.getKey(...args) : JSON.stringify({
            name: fn.name,
            args
        });
        const now = Date.now();
        const cached = cache.get(key);
        if (cached && now < cached.expiry) {
            return cached.value;
        }
        const result = await fn(...args);
        cache.set(key, {
            value: result,
            expiry: now + options.ttl
        });
        return result;
    };
}
}}),
"[project]/algobots-dashboard/src/lib/bybit-api.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "BYBIT_WEBSOCKET_URL": (()=>BYBIT_WEBSOCKET_URL),
    "DEFAULT_REQUEST_TIMEOUT": (()=>DEFAULT_REQUEST_TIMEOUT),
    "KlineEntrySchema": (()=>KlineEntrySchema),
    "OrderBookEntrySchema": (()=>OrderBookEntrySchema),
    "OrderBookSchema": (()=>OrderBookSchema),
    "RecentTradeSchema": (()=>RecentTradeSchema),
    "TickerInfoSchema": (()=>TickerInfoSchema),
    "getKline": (()=>getKline),
    "getOrderBook": (()=>getOrderBook),
    "getRecentTrades": (()=>getRecentTrades),
    "getTicker": (()=>getTicker)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__ = __turbopack_context__.i("[project]/node_modules/zod/v3/external.js [app-rsc] (ecmascript) <export * as z>");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$cache$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/cache.ts [app-rsc] (ecmascript)");
;
;
const TickerInfoSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    lastPrice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    highPrice24h: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    lowPrice24h: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    turnover24h: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    volume24h: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    price24hPcnt: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()
});
const OrderBookEntrySchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].tuple([
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()
]);
const OrderBookSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    bids: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(OrderBookEntrySchema),
    asks: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(OrderBookEntrySchema),
    ts: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()
});
const RecentTradeSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    execId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    execTime: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].union([
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
    ]),
    price: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    qty: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    side: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'Buy',
        'Sell'
    ]),
    isBlockTrade: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].boolean().optional()
});
const KlineEntrySchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    time: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    open: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    high: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    low: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    close: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    volume: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    turnover: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const BYBIT_WEBSOCKET_URL = 'wss://stream.bybit.com/v5/public/linear';
const DEFAULT_REQUEST_TIMEOUT = 10000;
const MAX_RETRIES = 3;
const RETRY_DELAY_MS = 1000;
const API_CATEGORY = 'linear';
async function fetchWithRetry(url, options = {}) {
    const controller = new AbortController();
    const timeoutId = setTimeout(()=>controller.abort(), DEFAULT_REQUEST_TIMEOUT);
    const fetchOptions = {
        cache: 'no-store',
        signal: options.signal || controller.signal,
        headers: {
            'Content-Type': 'application/json',
            ...options.headers
        },
        ...options
    };
    for(let i = 0; i <= MAX_RETRIES; i++){
        try {
            const response = await fetch(url, fetchOptions);
            clearTimeout(timeoutId);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const data = await response.json();
            if (data.retCode !== 0) throw new Error(data.retMsg);
            return data;
        } catch (error) {
            clearTimeout(timeoutId);
            if (i === MAX_RETRIES) {
                console.error(`Failed to fetch from Bybit endpoint ${url} after ${MAX_RETRIES} retries:`, error);
                return null;
            }
            await new Promise((res)=>setTimeout(res, RETRY_DELAY_MS * Math.pow(2, i)));
        }
    }
    return null;
}
const intervalMap = {
    '1m': '1',
    '5m': '5',
    '15m': '15',
    '30m': '30',
    '1h': '60',
    '2h': '120',
    '4h': '240',
    '6h': '360',
    '12h': '720',
    '1d': 'D',
    '1w': 'W',
    '1M': 'M'
};
class BybitAPI {
    config;
    constructor(config){
        this.config = config;
    }
    async get(endpoint, params) {
        const url = new URL(this.config.baseUrl + endpoint);
        if (params) {
            Object.keys(params).forEach((key)=>url.searchParams.append(key, params[key]));
        }
        const cachedFetch = (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$cache$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["withCache"])(fetchWithRetry, {
            ttl: endpoint.includes('kline') ? 60000 : 10000,
            getKey: (url)=>url
        });
        return cachedFetch(url.toString());
    }
    async fetchHistoricalData(symbol, timeframe, limit = 200) {
        const interval = intervalMap[timeframe] || timeframe;
        return this.get('/v5/market/kline', {
            category: API_CATEGORY,
            symbol,
            interval,
            limit
        });
    }
    async fetchMarketData(symbol) {
        return this.get('/v5/market/tickers', {
            category: API_CATEGORY,
            symbol
        });
    }
    async fetchOrderBook(symbol, limit = 50) {
        return this.get('/v5/market/orderbook', {
            category: API_CATEGORY,
            symbol,
            limit
        });
    }
    async fetchRecentTrades(symbol, limit = 50) {
        return this.get('/v5/market/recent-trade', {
            category: API_CATEGORY,
            symbol,
            limit
        });
    }
}
const api = new BybitAPI({
    baseUrl: 'https://api.bybit.com'
});
const getTicker = async (symbol)=>{
    const data = await api.fetchMarketData(symbol);
    if (data && data.result.list.length > 0) {
        const ticker = data.result.list[0];
        const parsed = TickerInfoSchema.safeParse(ticker);
        if (parsed.success) return parsed.data;
        console.error("Failed to parse TickerInfo:", parsed.error);
    }
    return null;
};
const getOrderBook = async (symbol)=>{
    const data = await api.fetchOrderBook(symbol);
    if (data) {
        const parsed = OrderBookSchema.safeParse({
            bids: data.result.b,
            asks: data.result.a,
            ts: data.result.ts
        });
        if (parsed.success) return parsed.data;
        console.error("Failed to parse OrderBook:", parsed.error);
    }
    return null;
};
const getRecentTrades = async (symbol, limit = 30)=>{
    const data = await api.fetchRecentTrades(symbol, limit);
    if (data && data.result.list) {
        const parsed = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(RecentTradeSchema).safeParse(data.result.list);
        if (parsed.success) return parsed.data;
        console.error("Failed to parse RecentTrades:", parsed.error);
    }
    return null;
};
const getKline = async (symbol, timeframe, limit = 200)=>{
    const data = await api.fetchHistoricalData(symbol, timeframe, limit);
    if (data && data.result.list) {
        const klineData = data.result.list.map((k)=>({
                time: parseInt(k[0]),
                open: parseFloat(k[1]),
                high: parseFloat(k[2]),
                low: parseFloat(k[3]),
                close: parseFloat(k[4]),
                volume: parseFloat(k[5]),
                turnover: parseFloat(k[6])
            })).reverse();
        const parsed = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(KlineEntrySchema).safeParse(klineData);
        if (parsed.success) return parsed.data;
        console.error("Failed to parse Kline data:", parsed.error);
    }
    return null;
};
}}),
"[project]/algobots-dashboard/src/lib/indicators.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "IndicatorDataSchema": (()=>IndicatorDataSchema),
    "IndicatorSettings": (()=>IndicatorSettings),
    "calculateIndicators": (()=>calculateIndicators),
    "defaultIndicatorSettings": (()=>defaultIndicatorSettings),
    "getKline": (()=>getKline)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__ = __turbopack_context__.i("[project]/node_modules/zod/v3/external.js [app-rsc] (ecmascript) <export * as z>");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/bybit-api.ts [app-rsc] (ecmascript)");
;
;
const IndicatorSettings = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    rsi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(14),
        overbought: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(70),
        oversold: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(30)
    }).default({}),
    macd: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        fast: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(12),
        slow: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(26),
        signal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(9)
    }).default({}),
    bollingerBands: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(20),
        stdDev: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive().default(2)
    }).default({}),
    stochastic: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(14),
        slowing: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(3),
        overbought: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(80),
        oversold: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(20)
    }).default({}),
    atr: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(14)
    }).default({}),
    williamsR: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(14),
        overbought: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(-20),
        oversold: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(-80)
    }).default({}),
    cci: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(20),
        overbought: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(100),
        oversold: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(-100)
    }).default({}),
    roc: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(12)
    }).default({}),
    mfi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(14),
        overbought: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(80),
        oversold: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().default(20)
    }).default({}),
    awesomeOscillator: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        fast: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(5),
        slow: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(34)
    }).default({}),
    ichimokuCloud: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        tenkan: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(9),
        kijun: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(26),
        senkou: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(52),
        displacement: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(26)
    }).default({}),
    sma: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(20)
    }).default({}),
    supertrendFast: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        atrPeriod: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(10),
        multiplier: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive().default(2)
    }).default({}),
    supertrendSlow: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        atrPeriod: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(20),
        multiplier: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive().default(4)
    }).default({}),
    fisher: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(9)
    }).default({}),
    ehlers: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(10)
    }).default({}),
    chandelier: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        period: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().default(22),
        multiplier: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive().default(3)
    }).default({})
});
const defaultIndicatorSettings = IndicatorSettings.parse({});
const RsiResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    rsi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const MacdResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    macd: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    signal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    histogram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const BollingerBandsResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    upper: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    middle: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    lower: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const StochasticResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    k: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    d: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const AtrResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    atr: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const ObvResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    obv: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const WilliamsRResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    williamsR: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const CciResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    cci: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const RocResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    roc: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const MfiResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    mfi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const AwesomeOscillatorResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    ao: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const IchimokuCloudResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    tenkanSen: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    kijunSen: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    senkouSpanA: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    senkouSpanB: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const SmaResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    sma: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const SupertrendResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    direction: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'buy',
        'sell'
    ]),
    supertrend: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const FisherTransformResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    fisher: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    trigger: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const EhlersTrendlineResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    trendline: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const ChandelierExitResultSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    long: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
    short: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()
});
const IndicatorDataSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    rsi: RsiResultSchema.optional(),
    macd: MacdResultSchema.optional(),
    bollingerBands: BollingerBandsResultSchema.optional(),
    stochastic: StochasticResultSchema.optional(),
    atr: AtrResultSchema.optional(),
    obv: ObvResultSchema.optional(),
    williamsR: WilliamsRResultSchema.optional(),
    cci: CciResultSchema.optional(),
    roc: RocResultSchema.optional(),
    mfi: MfiResultSchema.optional(),
    awesomeOscillator: AwesomeOscillatorResultSchema.optional(),
    ichimokuCloud: IchimokuCloudResultSchema.optional(),
    sma: SmaResultSchema.optional(),
    supertrendFast: SupertrendResultSchema.optional(),
    supertrendSlow: SupertrendResultSchema.optional(),
    fisher: FisherTransformResultSchema.optional(),
    ehlers: EhlersTrendlineResultSchema.optional(),
    chandelier: ChandelierExitResultSchema.optional()
});
const getKline = __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getKline"];
// #region Calculation Utilities
function sma(data, period) {
    if (data.length < period) return new Array(data.length).fill(null);
    const results = new Array(period - 1).fill(null);
    let sum = 0;
    for(let i = 0; i < period; i++){
        sum += data[i];
    }
    results.push(sum / period);
    for(let i = period; i < data.length; i++){
        sum += data[i] - data[i - period];
        results.push(sum / period);
    }
    return results;
}
function ema(data, period) {
    if (data.length < period) return new Array(data.length).fill(null);
    const results = [];
    const multiplier = 2 / (period + 1);
    let sum = 0;
    for(let i = 0; i < period; i++){
        sum += data[i];
        results.push(null);
    }
    let prevEma = sum / period;
    results[period - 1] = prevEma;
    for(let i = period; i < data.length; i++){
        const emaValue = (data[i] - prevEma) * multiplier + prevEma;
        results.push(emaValue);
        prevEma = emaValue;
    }
    return results;
}
class Indicator {
    data;
    constructor(data){
        this.data = data;
    }
    getResult() {
        const results = this.calculate();
        const lastResult = results.length > 0 ? results[results.length - 1] : null;
        if (lastResult === null || lastResult === undefined) return undefined;
        if (typeof lastResult === 'object') {
            for(const key in lastResult){
                const value = lastResult[key];
                if (typeof value === 'number' && (isNaN(value) || !isFinite(value))) {
                    return undefined;
                }
            }
        } else if (typeof lastResult === 'number' && (isNaN(lastResult) || !isFinite(lastResult))) {
            return undefined;
        }
        return lastResult;
    }
}
// #endregion
// #region Indicator Classes
class SMA extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        const closes = this.data.map((d)=>d.close);
        const smaValues = sma(closes, this.period);
        return smaValues.map((s)=>s === null ? null : {
                sma: s
            });
    }
}
class RSI extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        const closes = this.data.map((d)=>d.close);
        if (closes.length <= this.period) return new Array(closes.length).fill(null);
        const results = new Array(this.period).fill(null);
        let gains = 0, losses = 0;
        for(let i = 1; i <= this.period; i++){
            const diff = closes[i] - closes[i - 1];
            if (diff > 0) gains += diff;
            else losses -= diff;
        }
        let avgGain = gains / this.period;
        let avgLoss = losses / this.period;
        let rs = avgLoss !== 0 ? avgGain / avgLoss : 0;
        results.push({
            rsi: 100 - 100 / (1 + rs)
        });
        for(let i = this.period + 1; i < closes.length; i++){
            const diff = closes[i] - closes[i - 1];
            let gain = 0, loss = 0;
            if (diff > 0) gain = diff;
            else loss = -diff;
            avgGain = (avgGain * (this.period - 1) + gain) / this.period;
            avgLoss = (avgLoss * (this.period - 1) + loss) / this.period;
            rs = avgLoss !== 0 ? avgGain / avgLoss : 0;
            results.push({
                rsi: 100 - 100 / (1 + rs)
            });
        }
        return results;
    }
}
class MACD extends Indicator {
    fast;
    slow;
    signal;
    constructor(data, fast, slow, signal){
        super(data), this.fast = fast, this.slow = slow, this.signal = signal;
    }
    calculate() {
        const closes = this.data.map((d)=>d.close);
        const emaFast = ema(closes, this.fast);
        const emaSlow = ema(closes, this.slow);
        const macdLine = emaFast.map((f, i)=>f === null || emaSlow[i] === null ? null : f - emaSlow[i]);
        const signalLine = ema(macdLine.filter((m)=>m !== null), this.signal);
        let signalIdx = 0;
        return macdLine.map((m)=>{
            if (m === null) return null;
            const signalVal = signalLine[signalIdx];
            signalIdx++;
            if (signalVal === null || signalVal === undefined) return null;
            return {
                macd: m,
                signal: signalVal,
                histogram: m - signalVal
            };
        });
    }
}
class BollingerBands extends Indicator {
    period;
    stdDev;
    constructor(data, period, stdDev){
        super(data), this.period = period, this.stdDev = stdDev;
    }
    calculate() {
        const closes = this.data.map((d)=>d.close);
        const middleBand = sma(closes, this.period);
        return middleBand.map((mb, i)=>{
            if (mb === null) return null;
            const slice = closes.slice(i - this.period + 1, i + 1);
            const variance = slice.reduce((acc, val)=>acc + Math.pow(val - mb, 2), 0) / this.period;
            const sd = Math.sqrt(variance);
            return {
                upper: mb + sd * this.stdDev,
                middle: mb,
                lower: mb - sd * this.stdDev
            };
        });
    }
}
class Stochastic extends Indicator {
    period;
    slowing;
    constructor(data, period, slowing){
        super(data), this.period = period, this.slowing = slowing;
    }
    calculate() {
        const kValues = new Array(this.period - 1).fill(null);
        for(let i = this.period - 1; i < this.data.length; i++){
            const slice = this.data.slice(i - this.period + 1, i + 1);
            const highestHigh = Math.max(...slice.map((d)=>d.high));
            const lowestLow = Math.min(...slice.map((d)=>d.low));
            const k = lowestLow === highestHigh ? 100 : (this.data[i].close - lowestLow) / (highestHigh - lowestLow) * 100;
            kValues.push(k);
        }
        const dValues = sma(kValues.filter((k)=>k !== null), this.slowing);
        let dIdx = 0;
        return kValues.map((k)=>{
            if (k === null) return null;
            const d = dValues[dIdx];
            dIdx++;
            if (d === null || d === undefined) return null;
            return {
                k,
                d
            };
        });
    }
}
class ATR extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        if (this.data.length < this.period) return new Array(this.data.length).fill(null);
        const trs = [
            this.data[0].high - this.data[0].low
        ];
        for(let i = 1; i < this.data.length; i++){
            trs.push(Math.max(this.data[i].high - this.data[i].low, Math.abs(this.data[i].high - this.data[i - 1].close), Math.abs(this.data[i].low - this.data[i - 1].close)));
        }
        const atrSma = sma(trs, this.period);
        return atrSma.map((a)=>a === null ? null : {
                atr: a
            });
    }
}
class OBV extends Indicator {
    constructor(data){
        super(data);
    }
    calculate() {
        if (this.data.length === 0) return [];
        const results = [
            {
                obv: 0
            }
        ];
        for(let i = 1; i < this.data.length; i++){
            const prevObv = results[i - 1].obv;
            const close = this.data[i].close;
            const prevClose = this.data[i - 1].close;
            const volume = this.data[i].volume;
            if (close > prevClose) results.push({
                obv: prevObv + volume
            });
            else if (close < prevClose) results.push({
                obv: prevObv - volume
            });
            else results.push({
                obv: prevObv
            });
        }
        return results;
    }
}
class WilliamsR extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        return this.data.map((_, i)=>{
            if (i < this.period - 1) return null;
            const slice = this.data.slice(i - this.period + 1, i + 1);
            const highestHigh = Math.max(...slice.map((d)=>d.high));
            const lowestLow = Math.min(...slice.map((d)=>d.low));
            const r = lowestLow === highestHigh ? -50 : (highestHigh - this.data[i].close) / (highestHigh - lowestLow) * -100;
            return {
                williamsR: r
            };
        });
    }
}
class CCI extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        return this.data.map((_, i)=>{
            if (i < this.period - 1) return null;
            const slice = this.data.slice(i - this.period + 1, i + 1);
            const typicalPrices = slice.map((d)=>(d.high + d.low + d.close) / 3);
            const smaTp = typicalPrices.reduce((a, b)=>a + b, 0) / this.period;
            const meanDeviation = typicalPrices.reduce((acc, val)=>acc + Math.abs(val - smaTp), 0) / this.period;
            if (meanDeviation === 0) return {
                cci: 0
            };
            const cci = (typicalPrices[this.period - 1] - smaTp) / (0.015 * meanDeviation);
            return {
                cci
            };
        });
    }
}
class ROC extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        const closes = this.data.map((d)=>d.close);
        return closes.map((c, i)=>{
            if (i < this.period) return null;
            const prevClose = closes[i - this.period];
            if (prevClose === 0) return {
                roc: 0
            };
            return {
                roc: (c - prevClose) / prevClose * 100
            };
        });
    }
}
class MFI extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        const typicalPrices = this.data.map((d)=>(d.high + d.low + d.close) / 3);
        const rawMoneyFlow = typicalPrices.map((tp, i)=>tp * this.data[i].volume);
        const posMoneyFlow = [], negMoneyFlow = [];
        for(let i = 1; i < typicalPrices.length; i++){
            if (typicalPrices[i] > typicalPrices[i - 1]) {
                posMoneyFlow.push(rawMoneyFlow[i]);
                negMoneyFlow.push(0);
            } else {
                posMoneyFlow.push(0);
                negMoneyFlow.push(rawMoneyFlow[i]);
            }
        }
        const results = new Array(this.period).fill(null);
        for(let i = this.period; i < typicalPrices.length; i++){
            const posSum = posMoneyFlow.slice(i - this.period, i).reduce((a, b)=>a + b, 0);
            const negSum = negMoneyFlow.slice(i - this.period, i).reduce((a, b)=>a + b, 0);
            if (negSum === 0) {
                results.push({
                    mfi: 100
                });
                continue;
            }
            const moneyRatio = posSum / negSum;
            results.push({
                mfi: 100 - 100 / (1 + moneyRatio)
            });
        }
        return results;
    }
}
class AwesomeOscillator extends Indicator {
    fast;
    slow;
    constructor(data, fast, slow){
        super(data), this.fast = fast, this.slow = slow;
    }
    calculate() {
        const midpoints = this.data.map((d)=>(d.high + d.low) / 2);
        const smaFast = sma(midpoints, this.fast);
        const smaSlow = sma(midpoints, this.slow);
        return smaSlow.map((s, i)=>{
            if (s === null || smaFast[i] === null) return null;
            return {
                ao: smaFast[i] - s
            };
        });
    }
}
class IchimokuCloud extends Indicator {
    tenkan;
    kijun;
    senkou;
    constructor(data, tenkan, kijun, senkou){
        super(data), this.tenkan = tenkan, this.kijun = kijun, this.senkou = senkou;
    }
    calculate() {
        const results = [];
        for(let i = 0; i < this.data.length; i++){
            const tenkanSen = this.getTenkan(i);
            const kijunSen = this.getKijun(i);
            const senkouSpanA = tenkanSen !== null && kijunSen !== null ? (tenkanSen + kijunSen) / 2 : null;
            const senkouSpanB = this.getSenkouB(i);
            results.push(tenkanSen === null ? null : {
                tenkanSen,
                kijunSen,
                senkouSpanA,
                senkouSpanB
            });
        }
        return results;
    }
    getTenkan(i) {
        if (i < this.tenkan - 1) return null;
        const slice = this.data.slice(i - this.tenkan + 1, i + 1);
        const high = Math.max(...slice.map((d)=>d.high));
        const low = Math.min(...slice.map((d)=>d.low));
        return (high + low) / 2;
    }
    getKijun(i) {
        if (i < this.kijun - 1) return null;
        const slice = this.data.slice(i - this.kijun + 1, i + 1);
        const high = Math.max(...slice.map((d)=>d.high));
        const low = Math.min(...slice.map((d)=>d.low));
        return (high + low) / 2;
    }
    getSenkouB(i) {
        if (i < this.senkou - 1) return null;
        const slice = this.data.slice(i - this.senkou + 1, i + 1);
        const high = Math.max(...slice.map((d)=>d.high));
        const low = Math.min(...slice.map((d)=>d.low));
        return (high + low) / 2;
    }
}
class Supertrend extends Indicator {
    period;
    multiplier;
    constructor(data, period, multiplier){
        super(data), this.period = period, this.multiplier = multiplier;
    }
    calculate() {
        const atrIndicator = new ATR(this.data, this.period);
        const atrs = atrIndicator.calculate();
        const results = new Array(this.data.length).fill(null);
        let direction = 'buy';
        let upperBand = 0, lowerBand = 0, supertrend = 0;
        for(let i = this.period; i < this.data.length; i++){
            const close = this.data[i].close;
            const high = this.data[i].high;
            const low = this.data[i].low;
            const atrResult = atrs[i];
            if (atrResult === null) continue;
            const atr = atrResult.atr;
            const prevResult = results[i - 1];
            const prevSupertrend = prevResult ? prevResult.supertrend : 0;
            const prevDirection = prevResult ? prevResult.direction : 'buy';
            upperBand = (high + low) / 2 + this.multiplier * atr;
            lowerBand = (high + low) / 2 - this.multiplier * atr;
            if (prevDirection === 'buy') {
                if (close < prevSupertrend) {
                    direction = 'sell';
                    supertrend = upperBand;
                } else {
                    direction = 'buy';
                    supertrend = Math.max(lowerBand, prevSupertrend);
                }
            } else {
                if (close > prevSupertrend) {
                    direction = 'buy';
                    supertrend = lowerBand;
                } else {
                    direction = 'sell';
                    supertrend = Math.min(upperBand, prevSupertrend);
                }
            }
            results[i] = {
                direction,
                supertrend
            };
        }
        return results;
    }
}
class FisherTransform extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        const results = [];
        let fisherValues = [];
        for(let i = 0; i < this.data.length; i++){
            if (i < this.period - 1) {
                results.push(null);
                continue;
            }
            const slice = this.data.slice(i - this.period + 1, i + 1);
            const highest = Math.max(...slice.map((d)=>(d.high + d.low) / 2));
            const lowest = Math.min(...slice.map((d)=>(d.high + d.low) / 2));
            let value = 0.33 * 2 * (((this.data[i].high + this.data[i].low) / 2 - lowest) / (highest - lowest) - 0.5) + 0.67 * (results[i - 1]?.fisher ?? 0);
            if (value > 0.99) value = 0.999;
            if (value < -0.99) value = -0.999;
            const fisher = 0.5 * Math.log((1 + value) / (1 - value));
            fisherValues.push(fisher);
            const trigger = fisherValues.length > 1 ? fisherValues[fisherValues.length - 2] : 0;
            results.push({
                fisher,
                trigger
            });
        }
        return results;
    }
}
class EhlersTrendline extends Indicator {
    period;
    constructor(data, period){
        super(data), this.period = period;
    }
    calculate() {
        const prices = this.data.map((d)=>(d.high + d.low) / 2);
        const trendlines = [];
        for(let i = 0; i < prices.length; i++){
            if (i < this.period) {
                trendlines.push(null);
                continue;
            }
            let sum = 0;
            for(let j = 0; j < this.period; j++){
                sum += prices[i - j] * (j + 1);
            }
            trendlines.push(sum / (this.period * (this.period + 1) / 2));
        }
        return trendlines.map((t)=>t === null ? null : {
                trendline: t
            });
    }
}
class ChandelierExit extends Indicator {
    period;
    multiplier;
    constructor(data, period, multiplier){
        super(data), this.period = period, this.multiplier = multiplier;
    }
    calculate() {
        const atrIndicator = new ATR(this.data, this.period);
        const atrs = atrIndicator.calculate();
        const results = [];
        for(let i = 0; i < this.data.length; i++){
            if (i < this.period || atrs[i] === null) {
                results.push(null);
                continue;
            }
            const dataSlice = this.data.slice(i - this.period + 1, i + 1);
            const highestHigh = Math.max(...dataSlice.map((d)=>d.high));
            const lowestLow = Math.min(...dataSlice.map((d)=>d.low));
            const atr = atrs[i].atr;
            results.push({
                long: highestHigh - atr * this.multiplier,
                short: lowestLow + atr * this.multiplier
            });
        }
        return results;
    }
}
function calculateIndicators(data, settings) {
    if (data.length === 0) return null;
    return {
        sma: new SMA(data, settings.sma.period).getResult(),
        rsi: new RSI(data, settings.rsi.period).getResult(),
        macd: new MACD(data, settings.macd.fast, settings.macd.slow, settings.macd.signal).getResult(),
        bollingerBands: new BollingerBands(data, settings.bollingerBands.period, settings.bollingerBands.stdDev).getResult(),
        stochastic: new Stochastic(data, settings.stochastic.period, settings.stochastic.slowing).getResult(),
        atr: new ATR(data, settings.atr.period).getResult(),
        obv: new OBV(data).getResult(),
        williamsR: new WilliamsR(data, settings.williamsR.period).getResult(),
        cci: new CCI(data, settings.cci.period).getResult(),
        roc: new ROC(data, settings.roc.period).getResult(),
        mfi: new MFI(data, settings.mfi.period).getResult(),
        awesomeOscillator: new AwesomeOscillator(data, settings.awesomeOscillator.fast, settings.awesomeOscillator.slow).getResult(),
        ichimokuCloud: new IchimokuCloud(data, settings.ichimokuCloud.tenkan, settings.ichimokuCloud.kijun, settings.ichimokuCloud.senkou).getResult(),
        supertrendFast: new Supertrend(data, settings.supertrendFast.atrPeriod, settings.supertrendFast.multiplier).getResult(),
        supertrendSlow: new Supertrend(data, settings.supertrendSlow.atrPeriod, settings.supertrendSlow.multiplier).getResult(),
        fisher: new FisherTransform(data, settings.fisher.period).getResult(),
        ehlers: new EhlersTrendline(data, settings.ehlers.period).getResult(),
        chandelier: new ChandelierExit(data, settings.chandelier.period, settings.chandelier.multiplier).getResult()
    };
} // #endregion
}}),
"[project]/algobots-dashboard/src/ai/flows/generate-trading-signal.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* __next_internal_action_entry_do_not_use__ [{"40b77f4eb79f02c3e61cf2bce8904751e26d3b49c8":"generateTradingSignal"},"",""] */ __turbopack_context__.s({
    "generateTradingSignal": (()=>generateTradingSignal)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/app-render/encryption.js [app-rsc] (ecmascript)");
/**
 * @fileOverview An AI agent that generates trading signals and market analysis using a direct, data-first approach.
 *
 * This version simplifies the AI interaction by gathering all necessary market data upfront
 * and passing it to the AI in a single, comprehensive prompt. This approach enhances
 * reliability and simplifies debugging compared to a multi-tool agentic system.
 *
 * - generateTradingSignal: The main function to generate a trading signal.
 * - GenerateTradingSignalInput: The Zod schema for the input.
 * - GenerateTradingSignalOutput: The Zod schema for the output.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$ai$2f$genkit$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/ai/genkit.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__ = __turbopack_context__.i("[project]/node_modules/zod/v3/external.js [app-rsc] (ecmascript) <export * as z>");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/bybit-api.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$indicators$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/indicators.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
;
;
// #region Schemas
const GenerateTradingSignalInputSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    symbol: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The trading symbol (e.g., BTCUSDT).'),
    timeframe: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Primary timeframe for analysis.'),
    indicatorSettings: __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$indicators$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["IndicatorSettings"].optional().describe('Technical indicator settings.'),
    riskProfile: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'conservative',
        'moderate',
        'aggressive'
    ]).default('moderate').describe('User\'s risk tolerance level.'),
    accountBalance: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().optional().describe('User\'s account balance for position sizing calculations.'),
    maxRiskPercentage: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().min(0.1).max(10).default(2).describe('Maximum risk per trade as a percentage of account balance.')
});
const GenerateTradingSignalOutputSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    currentPrice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().describe('Current market price at the time of analysis.'),
    entryPrice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().describe('Recommended entry price for the trade.'),
    takeProfit: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()).min(1).describe('An array of multiple take-profit levels (e.g., TP1, TP2).'),
    stopLoss: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().describe('The recommended stop-loss price level for risk management.'),
    signal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'Buy',
        'Sell',
        'Hold'
    ]).describe('The final trading signal.'),
    signalStrength: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().min(0).max(100).describe('A data-driven signal strength score from 0 to 100.'),
    reasoning: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('A detailed, step-by-step analysis explaining the rationale behind the signal, referencing specific data points.'),
    confidenceLevel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'High',
        'Medium',
        'Low'
    ]).describe('The AI\'s confidence in the signal.'),
    positionSize: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().optional().describe('Recommended position size in the base currency (e.g., BTC amount).'),
    riskRewardRatio: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().optional().describe('The calculated risk/reward ratio for the first take-profit level.'),
    marketRegime: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'Trending Up',
        'Trending Down',
        'Ranging',
        'Volatile'
    ]).describe('The AI\'s assessment of the current market regime.'),
    volatilityLevel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'Low',
        'Medium',
        'High',
        'Extreme'
    ]).describe('The AI\'s assessment of current market volatility.'),
    keyLevels: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        support: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()).describe('Key support levels identified.'),
        resistance: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()).describe('Key resistance levels identified.')
    }).describe('Key price levels.'),
    patterns: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        name: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('e.g., "Bullish Flag", "Head and Shoulders"'),
        reliability: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().min(0).max(100).describe('Estimated reliability of the pattern.')
    })).optional().describe('Detected chart patterns.'),
    divergences: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
            'Bullish',
            'Bearish'
        ]).describe('Type of divergence.'),
        indicator: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Indicator showing divergence (e.g., "RSI", "MACD").')
    })).optional().describe('Detected indicator divergences.'),
    warnings: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().describe('Important risk warnings or caveats (e.g., "High volatility expected", "Low liquidity").'),
    analysisTimestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('ISO timestamp of when the analysis was performed.')
});
async function generateTradingSignal(input) {
    return generateTradingSignalFlow(input);
}
/**
 * Gathers all necessary market data in parallel.
 * @param symbol The trading symbol.
 * @param timeframe The analysis timeframe.
 * @param settings Technical indicator settings.
 * @returns An object containing all fetched market data.
 */ async function gatherMarketData(symbol, timeframe, settings) {
    const [tickerResult, klineResult, orderBookResult, tradesResult] = await Promise.allSettled([
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getTicker"])(symbol),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getKline"])(symbol, timeframe, 300),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getOrderBook"])(symbol),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$bybit$2d$api$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getRecentTrades"])(symbol, 50)
    ]);
    const ticker = tickerResult.status === 'fulfilled' ? tickerResult.value : null;
    const klineData = klineResult.status === 'fulfilled' ? klineResult.value : null;
    const orderBook = orderBookResult.status === 'fulfilled' ? orderBookResult.value : null;
    const recentTrades = tradesResult.status === 'fulfilled' ? tradesResult.value : null;
    let indicators = null;
    if (klineData) {
        indicators = (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$indicators$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["calculateIndicators"])(klineData, settings || {});
    }
    return {
        ticker,
        indicators,
        orderBook,
        recentTrades
    };
}
// #region AI Prompt
const tradingSignalPrompt = __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$ai$2f$genkit$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ai"].definePrompt({
    name: 'directTradingSignalPrompt',
    input: {
        schema: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].any()
    },
    output: {
        format: 'json',
        schema: GenerateTradingSignalOutputSchema
    },
    system: `You are an elite quantitative trading analyst AI. Your mission is to generate a comprehensive, actionable trading signal by performing a multi-dimensional analysis of the provided market data context.

**Analysis Framework & Logic:**

1.  **Analyze Context:** The user will provide a JSON string containing all available market data. Your first step is to parse and understand this data. Note any fields that are 'null', as this indicates a data fetching failure which should lower your confidence.

2.  **Market Assessment (Fill these fields):**
    *   **Market Regime:** Analyze indicator trends (e.g., ADX, moving averages) to determine if the market is 'Trending Up', 'Trending Down', 'Ranging', or 'Volatile'.
    *   **Volatility Level:** Use the ATR (Average True Range) from the indicator data to classify volatility as 'Low', 'Medium', 'High', or 'Extreme'.

3.  **Signal Generation (Determine 'signal'):**
    *   **Buy Signal:** Strong bullish indicator alignment (e.g., RSI < 40, MACD crossover), price bouncing from key support, bullish patterns confirmed, positive order flow.
    *   **Sell Signal:** Strong bearish indicator alignment (e.g., RSI > 60, MACD crossunder), price rejecting key resistance, bearish patterns confirmed, negative order flow.
    *   **Hold Signal:** Conflicting indicators, price is in a tight range between strong support/resistance, market is highly volatile with no clear direction, or critical data is missing.

4.  **Trade Parameters & Risk Management:**
    *   Set the \`entryPrice\` near the \`currentPrice\`.
    *   Set the \`stopLoss\` below a key support level for a Buy, or above key resistance for a Sell. Use the ATR to give it some buffer.
    *   Define at least two \`takeProfit\` levels based on upcoming resistance (for Buys) or support (for Sells).
    *   If \`accountBalance\` is available in the input, calculate a \`positionSize\` based on the \`maxRiskPercentage\`, \`entryPrice\`, and \`stopLoss\`.
    *   Calculate the \`riskRewardRatio\` for the first TP. It **must be at least 1.5** for a Buy/Sell signal. If not, downgrade to Hold and state this in the reasoning.

5.  **Scoring & Reasoning:**
    *   **Signal Strength (0-100):** Calculate this score based on the confluence of evidence. Start at 50. Add points for: each confirming indicator (+10), pattern confirmation (+15), strong order book support/resistance (+15), trend alignment (+10). Subtract points for: conflicting indicators (-10), low liquidity (-10), extreme volatility (-10), missing data (-15 per missing source).
    *   **Confidence Level:** Set to 'High' if strength > 70, 'Medium' if 40-70, 'Low' if < 40.
    *   **Reasoning:** Write a detailed, step-by-step narrative. Start with the market assessment, discuss the key indicator and pattern findings, mention the identified support/resistance levels, and conclude with how this all justifies the final signal and trade parameters. You must mention any missing data.

6.  **Final Output:**
    *   Populate all fields in the output schema. Add any \`warnings\` for risks like low liquidity or high volatility.
    *   Set \`analysisTimestamp\` to the current UTC ISO string. Your entire output must be a single, valid JSON object.`
});
// #endregion
// #region Genkit Flow
const generateTradingSignalFlow = __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$ai$2f$genkit$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ai"].defineFlow({
    name: 'generateTradingSignalFlow',
    inputSchema: GenerateTradingSignalInputSchema,
    outputSchema: GenerateTradingSignalOutputSchema
}, async (input)=>{
    console.log(`[Flow] Starting direct signal generation for ${input.symbol} on ${input.timeframe}.`);
    const { ticker, indicators, orderBook, recentTrades } = await gatherMarketData(input.symbol, input.timeframe, input.indicatorSettings);
    if (!ticker) {
        throw new Error(`Critical failure: Could not fetch market ticker for ${input.symbol}. Cannot proceed.`);
    }
    // Construct a detailed context for the AI
    const context = {
        input,
        data: {
            ticker,
            indicators,
            orderBook,
            recentTrades
        }
    };
    const llmResponse = await tradingSignalPrompt(JSON.stringify(context, null, 2));
    const output = llmResponse.output;
    if (!output) {
        throw new Error("AI failed to produce a valid JSON response. The model may have returned an empty or malformed output.");
    }
    // Final validation and sanitization
    const requiredNumericFields = [
        'currentPrice',
        'entryPrice',
        'stopLoss',
        'signalStrength'
    ];
    for (const field of requiredNumericFields){
        const value = output[field];
        if (value === null || typeof value !== 'number' || !isFinite(value) || value < 0) {
            throw new Error(`AI generated an invalid or non-positive numeric value for '${field}'. Received: ${value}`);
        }
    }
    if (!output.takeProfit || output.takeProfit.length === 0 || output.takeProfit.some((tp)=>typeof tp !== 'number' || tp <= 0)) {
        throw new Error(`AI generated invalid takeProfit levels. Received: ${JSON.stringify(output.takeProfit)}`);
    }
    console.log(`[Flow] Successfully generated signal for ${input.symbol}: ${output.signal} (Strength: ${output.signalStrength})`);
    return output;
}); // #endregion
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    generateTradingSignal
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(generateTradingSignal, "40b77f4eb79f02c3e61cf2bce8904751e26d3b49c8", null);
}}),
"[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* __next_internal_action_entry_do_not_use__ [{"40f2e7943f458a31f11946e6fe9708a76aa9d6df9a":"getAiTradingSignal"},"",""] */ __turbopack_context__.s({
    "getAiTradingSignal": (()=>getAiTradingSignal)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/app-render/encryption.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$ai$2f$flows$2f$generate$2d$trading$2d$signal$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/ai/flows/generate-trading-signal.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
async function getAiTradingSignal(options) {
    try {
        const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$ai$2f$flows$2f$generate$2d$trading$2d$signal$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["generateTradingSignal"])(options);
        if (!result) {
            return {
                success: false,
                error: 'AI returned no result.'
            };
        }
        return {
            success: true,
            analysis: result
        };
    } catch (error) {
        console.error('Error generating AI trading signal:', error);
        const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred.';
        return {
            success: false,
            error: errorMessage
        };
    }
}
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    getAiTradingSignal
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(getAiTradingSignal, "40f2e7943f458a31f11946e6fe9708a76aa9d6df9a", null);
}}),
"[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => \"[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)");
;
}}),
"[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => \"[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f2e$next$2d$internal$2f$server$2f$app$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i('[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => "[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <locals>');
}}),
"[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => \"[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "40f2e7943f458a31f11946e6fe9708a76aa9d6df9a": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getAiTradingSignal"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f2e$next$2d$internal$2f$server$2f$app$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i('[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => "[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <locals>');
}}),
"[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => \"[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "40f2e7943f458a31f11946e6fe9708a76aa9d6df9a": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f2e$next$2d$internal$2f$server$2f$app$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$exports$3e$__["40f2e7943f458a31f11946e6fe9708a76aa9d6df9a"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f2e$next$2d$internal$2f$server$2f$app$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i('[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => "[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <module evaluation>');
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f2e$next$2d$internal$2f$server$2f$app$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$algobots$2d$dashboard$2f$src$2f$lib$2f$actions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i('[project]/algobots-dashboard/.next-internal/server/app/page/actions.js { ACTIONS_MODULE0 => "[project]/algobots-dashboard/src/lib/actions.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <exports>');
}}),
"[project]/algobots-dashboard/src/app/favicon.ico.mjs { IMAGE => \"[project]/algobots-dashboard/src/app/favicon.ico (static in ecmascript)\" } [app-rsc] (structured image object, ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/algobots-dashboard/src/app/favicon.ico.mjs { IMAGE => \"[project]/algobots-dashboard/src/app/favicon.ico (static in ecmascript)\" } [app-rsc] (structured image object, ecmascript)"));
}}),
"[project]/algobots-dashboard/src/app/layout.tsx [app-rsc] (ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/algobots-dashboard/src/app/layout.tsx [app-rsc] (ecmascript)"));
}}),
"[project]/algobots-dashboard/src/app/page.tsx (client reference/proxy) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server-edge.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/algobots-dashboard/src/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/algobots-dashboard/src/app/page.tsx <module evaluation>", "default");
}}),
"[project]/algobots-dashboard/src/app/page.tsx (client reference/proxy)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server-edge.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/algobots-dashboard/src/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/algobots-dashboard/src/app/page.tsx", "default");
}}),
"[project]/algobots-dashboard/src/app/page.tsx [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$app$2f$page$2e$tsx__$28$client__reference$2f$proxy$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/app/page.tsx (client reference/proxy) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$app$2f$page$2e$tsx__$28$client__reference$2f$proxy$29$__ = __turbopack_context__.i("[project]/algobots-dashboard/src/app/page.tsx (client reference/proxy)");
;
__turbopack_context__.n(__TURBOPACK__imported__module__$5b$project$5d2f$algobots$2d$dashboard$2f$src$2f$app$2f$page$2e$tsx__$28$client__reference$2f$proxy$29$__);
}}),
"[project]/algobots-dashboard/src/app/page.tsx [app-rsc] (ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/algobots-dashboard/src/app/page.tsx [app-rsc] (ecmascript)"));
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__0a876296._.js.map