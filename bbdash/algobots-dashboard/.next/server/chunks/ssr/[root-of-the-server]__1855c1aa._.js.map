{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.5-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/indicators.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const IndicatorSettings = z.object({\n    rsi: z.object({\n        period: z.number(),\n        overbought: z.number(),\n        oversold: z.number(),\n    }),\n    macd: z.object({\n        fast: z.number(),\n        slow: z.number(),\n        signal: z.number(),\n    }),\n    bollingerBands: z.object({\n        period: z.number(),\n        stdDev: z.number(),\n    }),\n    stochastic: z.object({\n        period: z.number(),\n        slowing: z.number(),\n        overbought: z.number(),\n        oversold: z.number(),\n    }),\n    atr: z.object({\n        period: z.number(),\n    }),\n    williamsR: z.object({\n        period: z.number(),\n        overbought: z.number(),\n        oversold: z.number(),\n    }),\n    cci: z.object({\n        period: z.number(),\n        overbought: z.number(),\n        oversold: z.number(),\n    }),\n    roc: z.object({\n        period: z.number(),\n    }),\n    mfi: z.object({\n        period: z.number(),\n        overbought: z.number(),\n        oversold: z.number(),\n    }),\n    awesomeOscillator: z.object({\n        fast: z.number(),\n        slow: z.number(),\n    }),\n    ichimokuCloud: z.object({\n        tenkan: z.number(),\n        kijun: z.number(),\n        senkou: z.number(),\n    }),\n    sma: z.object({\n        period: z.number(),\n    }),\n    supertrendFast: z.object({\n        atrPeriod: z.number(),\n        multiplier: z.number(),\n    }),\n    supertrendSlow: z.object({\n        atrPeriod: z.number(),\n        multiplier: z.number(),\n    }),\n});\n\nexport type IndicatorSettings = z.infer<typeof IndicatorSettings>;\n\nexport const defaultIndicatorSettings: IndicatorSettings = {\n    rsi: { period: 14, overbought: 70, oversold: 30 },\n    macd: { fast: 12, slow: 26, signal: 9 },\n    bollingerBands: { period: 20, stdDev: 2 },\n    stochastic: { period: 14, slowing: 3, overbought: 80, oversold: 20 },\n    atr: { period: 14 },\n    williamsR: { period: 14, overbought: -20, oversold: -80 },\n    cci: { period: 20, overbought: 100, oversold: -100 },\n    roc: { period: 14 },\n    mfi: { period: 14, overbought: 80, oversold: 20 },\n    awesomeOscillator: { fast: 5, slow: 34 },\n    ichimokuCloud: { tenkan: 9, kijun: 26, senkou: 52 },\n    sma: { period: 20 },\n    supertrendFast: { atrPeriod: 10, multiplier: 2 },\n    supertrendSlow: { atrPeriod: 20, multiplier: 3 },\n};\n\n\nexport interface RsiResult {\n  rsi: number;\n}\n\nexport interface MacdResult {\n  macd: number;\n  signal: number;\n  histogram: number;\n}\n\nexport interface BollingerBandsResult {\n  upper: number;\n  middle: number;\n  lower: number;\n}\n\nexport interface StochasticResult {\n  k: number;\n  d: number;\n}\n\nexport interface AtrResult {\n  atr: number;\n}\n\nexport interface ObvResult {\n  obv: number;\n}\n\nexport interface WilliamsRResult {\n  williamsR: number;\n}\n\nexport interface CciResult {\n  cci: number;\n}\n\nexport interface RocResult {\n  roc: number;\n}\n\nexport interface MfiResult {\n  mfi: number;\n}\n\nexport interface AwesomeOscillatorResult {\n    ao: number;\n}\n\nexport interface IchimokuCloudResult {\n    tenkanSen: number;\n    kijunSen: number;\n    senkouSpanA: number;\n    senkouSpanB: number;\n}\n\nexport interface SmaResult {\n    sma: number;\n}\n\nexport interface SupertrendResult {\n  supertrend: number;\n  direction: 'buy' | 'sell';\n  upperBand: number;\n  lowerBand: number;\n}\n\nexport interface IndicatorData {\n  rsi: RsiResult | null;\n  macd: MacdResult | null;\n  bollingerBands: BollingerBandsResult | null;\n  stochastic: StochasticResult | null;\n  atr: AtrResult | null;\n  obv: ObvResult | null;\n  williamsR: WilliamsRResult | null;\n  cci: CciResult | null;\n  roc: RocResult | null;\n  mfi: MfiResult | null;\n  awesomeOscillator: AwesomeOscillatorResult | null;\n  ichimokuCloud: IchimokuCloudResult | null;\n  sma: SmaResult | null;\n  supertrendFast: SupertrendResult | null;\n  supertrendSlow: SupertrendResult | null;\n}\n\nfunction calculateSMA(data: number[], period: number): number[] {\n  const sma: number[] = [];\n  if (data.length < period) return [];\n  for (let i = period - 1; i < data.length; i++) {\n    const slice = data.slice(i - period + 1, i + 1);\n    const sum = slice.reduce((a, b) => a + b, 0);\n    sma.push(sum / period);\n  }\n  return sma;\n}\n\nfunction calculateEMA(data: number[], period: number): number[] {\n  if (data.length < period) return [];\n  const k = 2 / (period + 1);\n  const ema: number[] = [data[0]];\n  for (let i = 1; i < data.length; i++) {\n    ema.push(data[i] * k + ema[i - 1] * (1 - k));\n  }\n  return ema;\n}\n\nfunction calculateRSI(\n  data: number[],\n  period: number = 14\n): RsiResult | null {\n  if (data.length < period + 1) return null;\n\n  let gains = 0;\n  let losses = 0;\n\n  // Initial calculation\n  for (let i = 1; i <= period; i++) {\n    const change = data[i] - data[i - 1];\n    if (change > 0) {\n      gains += change;\n    } else {\n      losses -= change;\n    }\n  }\n\n  let avgGain = gains / period;\n  let avgLoss = losses / period;\n\n  // Subsequent calculations\n  for (let i = period + 1; i < data.length; i++) {\n    const change = data[i] - data[i - 1];\n    let currentGain = change > 0 ? change : 0;\n    let currentLoss = change < 0 ? -change : 0;\n    avgGain = (avgGain * (period - 1) + currentGain) / period;\n    avgLoss = (avgLoss * (period - 1) + currentLoss) / period;\n  }\n\n  if (avgLoss === 0) return { rsi: 100 };\n\n  const rs = avgGain / avgLoss;\n  const rsi = 100 - (100 / (1 + rs));\n\n  return { rsi };\n}\n\nfunction calculateMACD(\n  data: number[],\n  fastPeriod: number = 12,\n  slowPeriod: number = 26,\n  signalPeriod: number = 9\n): MacdResult | null {\n  if (data.length < slowPeriod) return null;\n\n  const emaFast = calculateEMA(data, fastPeriod);\n  const emaSlow = calculateEMA(data, slowPeriod);\n  \n  const macdLine = emaFast.slice(slowPeriod - fastPeriod).map((fast, i) => fast - emaSlow[i]);\n  \n  if (macdLine.length < signalPeriod) return null;\n  \n  const signalLine = calculateEMA(macdLine, signalPeriod);\n  const histogram = macdLine.slice(macdLine.length - signalLine.length).map((macd, i) => macd - signalLine[i]);\n\n  return {\n    macd: macdLine[macdLine.length - 1],\n    signal: signalLine[signalLine.length - 1],\n    histogram: histogram[histogram.length - 1],\n  };\n}\n\n\nfunction calculateBollingerBands(\n  data: number[],\n  period: number = 20,\n  stdDev: number = 2\n): BollingerBandsResult | null {\n  if (data.length < period) return null;\n\n  const slice = data.slice(data.length - period);\n  const sma = slice.reduce((a, b) => a + b, 0) / period;\n  const standardDeviation = Math.sqrt(\n    slice.map(x => Math.pow(x - sma, 2)).reduce((a, b) => a + b, 0) / period\n  );\n\n  return {\n    upper: sma + stdDev * standardDeviation,\n    middle: sma,\n    lower: sma - stdDev * standardDeviation,\n  };\n}\n\nfunction calculateStochastic(\n  highs: number[],\n  lows: number[],\n  closes: number[],\n  period: number = 14,\n  kSlowing: number = 3\n): StochasticResult | null {\n  if (closes.length < period) return null;\n  const kLine: number[] = [];\n\n  for (let i = period - 1; i < closes.length; i++) {\n    const highSlice = highs.slice(i - period + 1, i + 1);\n    const lowSlice = lows.slice(i - period + 1, i + 1);\n    const highestHigh = Math.max(...highSlice);\n    const lowestLow = Math.min(...lowSlice);\n    const currentClose = closes[i];\n    const k = ((currentClose - lowestLow) / (highestHigh - lowestLow)) * 100;\n    kLine.push(k);\n  }\n\n  if (kLine.length < kSlowing) return null;\n\n  const dLine = calculateSMA(kLine, kSlowing);\n\n  return {\n    k: kLine[kLine.length - 1],\n    d: dLine[dLine.length - 1],\n  };\n}\n\nfunction calculateTR(highs: number[], lows: number[], closes: number[]): number[] {\n  const tr: number[] = [highs[0] - lows[0]];\n  for (let i = 1; i < highs.length; i++) {\n    tr.push(Math.max(highs[i] - lows[i], Math.abs(highs[i] - closes[i - 1]), Math.abs(lows[i] - closes[i - 1])));\n  }\n  return tr;\n}\n\n\nfunction calculateATR(\n  highs: number[],\n  lows: number[],\n  closes: number[],\n  period: number = 14\n): AtrResult | null {\n  if (closes.length < period) return null;\n  const trs = calculateTR(highs, lows, closes);\n  const atrs: number[] = [];\n  \n  if (trs.length < period) return null;\n\n  let sum = 0;\n  for (let i = 0; i < period; i++) {\n    sum += trs[i];\n  }\n  atrs.push(sum/period);\n\n  for (let i = period; i < trs.length; i++) {\n      atrs.push((atrs[atrs.length -1] * (period -1) + trs[i]) / period);\n  }\n  return atrs.length > 0 ? { atr: atrs[atrs.length - 1] } : null;\n}\n\nfunction calculateOBV(\n  closes: number[],\n  volumes: number[]\n): ObvResult | null {\n  if (closes.length < 2) return null;\n  let obv = 0;\n  for (let i = 1; i < closes.length; i++) {\n    if (closes[i] > closes[i - 1]) {\n      obv += volumes[i];\n    } else if (closes[i] < closes[i - 1]) {\n      obv -= volumes[i];\n    }\n  }\n  return { obv };\n}\n\nfunction calculateWilliamsR(\n  highs: number[],\n  lows: number[],\n  closes: number[],\n  period: number = 14\n): WilliamsRResult | null {\n  if (closes.length < period) return null;\n  const sliceHighs = highs.slice(highs.length - period);\n  const sliceLows = lows.slice(lows.length - period);\n  const highestHigh = Math.max(...sliceHighs);\n  const lowestLow = Math.min(...sliceLows);\n  const currentClose = closes[closes.length - 1];\n\n  const williamsR = ((highestHigh - currentClose) / (highestHigh - lowestLow)) * -100;\n\n  return { williamsR };\n}\n\nfunction calculateCCI(\n  highs: number[],\n  lows: number[],\n  closes: number[],\n  period: number = 20\n): CciResult | null {\n  if (closes.length < period) return null;\n  const typicalPrices = highs.map((h, i) => (h + lows[i] + closes[i]) / 3);\n  const sma = calculateSMA(typicalPrices, period);\n  const lastSma = sma[sma.length - 1];\n\n  const slice = typicalPrices.slice(typicalPrices.length - period);\n  const meanDeviation = slice.reduce((sum, price) => sum + Math.abs(price - lastSma), 0) / period;\n\n  const lastTypicalPrice = typicalPrices[typicalPrices.length - 1];\n  const cci = (lastTypicalPrice - lastSma) / (0.015 * meanDeviation);\n\n  return { cci };\n}\n\nfunction calculateROC(\n  closes: number[],\n  period: number = 14\n): RocResult | null {\n  if (closes.length < period + 1) return null;\n  const priorClose = closes[closes.length - 1 - period];\n  const currentClose = closes[closes.length - 1];\n  const roc = ((currentClose - priorClose) / priorClose) * 100;\n  return { roc };\n}\n\nfunction calculateMFI(\n  highs: number[],\n  lows: number[],\n  closes: number[],\n  volumes: number[],\n  period: number = 14\n): MfiResult | null {\n    if (closes.length < period + 1) return null;\n\n    const typicalPrices = closes.map((c, i) => (highs[i] + lows[i] + c) / 3);\n\n    let posMoneyFlow = 0;\n    let negMoneyFlow = 0;\n\n    for (let i = closes.length - period; i < closes.length; i++) {\n        const rawMoneyFlow = typicalPrices[i] * volumes[i];\n        if (typicalPrices[i] > typicalPrices[i-1]) {\n            posMoneyFlow += rawMoneyFlow;\n        } else if (typicalPrices[i] < typicalPrices[i-1]) {\n            negMoneyFlow += rawMoneyFlow;\n        }\n    }\n    \n    if (negMoneyFlow === 0) return { mfi: 100 };\n    const moneyRatio = posMoneyFlow / negMoneyFlow;\n    const mfi = 100 - (100 / (1 + moneyRatio));\n    return { mfi };\n}\n\n\nfunction calculateAwesomeOscillator(\n    highs: number[],\n    lows: number[],\n    fastPeriod: number = 5,\n    slowPeriod: number = 34\n): AwesomeOscillatorResult | null {\n    if (highs.length < slowPeriod) return null;\n    const midpoints = highs.map((h, i) => (h + lows[i]) / 2);\n    const smaFast = calculateSMA(midpoints, fastPeriod);\n    const smaSlow = calculateSMA(midpoints, slowPeriod);\n    const lastSmaFast = smaFast[smaFast.length - 1];\n    const lastSmaSlow = smaSlow[smaSlow.length -1];\n    \n    if(lastSmaFast === undefined || lastSmaSlow === undefined) return null;\n\n    const ao = lastSmaFast - lastSmaSlow;\n    return { ao };\n}\n\nfunction calculateIchimokuCloud(\n    highs: number[],\n    lows: number[],\n    closes: number[],\n    tenkanPeriod: number = 9,\n    kijunPeriod: number = 26,\n    senkouSpanBPeriod: number = 52\n): IchimokuCloudResult | null {\n    if (closes.length < senkouSpanBPeriod) return null;\n\n    const tenkanSen = (Math.max(...highs.slice(highs.length - tenkanPeriod)) + Math.min(...lows.slice(lows.length - tenkanPeriod))) / 2;\n    const kijunSen = (Math.max(...highs.slice(highs.length - kijunPeriod)) + Math.min(...lows.slice(lows.length - kijunPeriod))) / 2;\n    \n    // Senkou Span A is forward looking, but for current analysis we use current tenkan/kijun\n    const senkouSpanA = (tenkanSen + kijunSen) / 2;\n    \n    const senkouSpanB = (Math.max(...highs.slice(highs.length - senkouSpanBPeriod)) + Math.min(...lows.slice(lows.length - senkouSpanBPeriod))) / 2;\n\n    return { tenkanSen, kijunSen, senkouSpanA, senkouSpanB };\n}\n\nfunction calculateSupertrend(\n  highs: number[],\n  lows: number[],\n  closes: number[],\n  atrPeriod: number,\n  multiplier: number\n): SupertrendResult | null {\n  if (closes.length < atrPeriod + 1) return null;\n\n  const trs = calculateTR(highs, lows, closes);\n  const atrs: number[] = [];\n  let sum = 0;\n  for (let i = 0; i < atrPeriod; i++) {\n    sum += trs[i];\n  }\n  atrs.push(sum / atrPeriod);\n  for (let i = atrPeriod; i < trs.length; i++) {\n    atrs.push((atrs[atrs.length - 1] * (atrPeriod - 1) + trs[i]) / atrPeriod);\n  }\n\n  let finalUpperBand = 0;\n  let finalLowerBand = 0;\n  let supertrend: {st: number, direction: 'buy' | 'sell', finalUpperBand: number, finalLowerBand: number}[] = [];\n  \n  for (let i = atrPeriod; i < closes.length; i++) {\n      const high = highs[i];\n      const low = lows[i];\n      const close = closes[i];\n      const prevClose = closes[i - 1];\n      const atr = atrs[i-atrPeriod];\n\n      let upperBand = (high + low) / 2 + multiplier * atr;\n      let lowerBand = (high + low) / 2 - multiplier * atr;\n      \n      const prevFinalUpperBand = supertrend[supertrend.length-1]?.finalUpperBand || upperBand;\n      const prevFinalLowerBand = supertrend[supertrend.length-1]?.finalLowerBand || lowerBand;\n\n      finalUpperBand = (upperBand < prevFinalUpperBand || prevClose > prevFinalUpperBand) ? upperBand : prevFinalUpperBand;\n      finalLowerBand = (lowerBand > prevFinalLowerBand || prevClose < prevFinalLowerBand) ? lowerBand : prevFinalLowerBand;\n      \n      let direction: 'buy' | 'sell';\n      const prevSt = supertrend[supertrend.length -1];\n      if (prevSt?.st === prevFinalUpperBand) {\n          direction = close > finalUpperBand ? 'buy' : 'sell';\n      } else {\n          direction = close < finalLowerBand ? 'sell' : 'buy';\n      }\n\n      supertrend.push({\n          st: direction === 'buy' ? finalLowerBand : finalUpperBand,\n          finalUpperBand: finalUpperBand,\n          finalLowerBand: finalLowerBand,\n          direction: direction\n      });\n  }\n\n  const lastResult = supertrend[supertrend.length - 1];\n  if (!lastResult) return null;\n\n  return {\n    supertrend: lastResult.st,\n    direction: lastResult.direction,\n    upperBand: lastResult.finalUpperBand,\n    lowerBand: lastResult.finalLowerBand,\n  };\n}\n\nexport function calculateIndicators(\n  closePrices: number[],\n  highPrices: number[],\n  lowPrices: number[],\n  volumes: number[],\n  settings: IndicatorSettings\n): IndicatorData {\n  const smaResult = calculateSMA(closePrices, settings.sma.period);\n\n  return {\n    rsi: calculateRSI(closePrices, settings.rsi.period),\n    macd: calculateMACD(closePrices, settings.macd.fast, settings.macd.slow, settings.macd.signal),\n    bollingerBands: calculateBollingerBands(closePrices, settings.bollingerBands.period, settings.bollingerBands.stdDev),\n    stochastic: calculateStochastic(highPrices, lowPrices, closePrices, settings.stochastic.period, settings.stochastic.slowing),\n    atr: calculateATR(highPrices, lowPrices, closePrices, settings.atr.period),\n    obv: calculateOBV(closePrices, volumes),\n    williamsR: calculateWilliamsR(highPrices, lowPrices, closePrices, settings.williamsR.period),\n    cci: calculateCCI(highPrices, lowPrices, closePrices, settings.cci.period),\n    roc: calculateROC(closePrices, settings.roc.period),\n    mfi: calculateMFI(highPrices, lowPrices, closePrices, volumes, settings.mfi.period),\n    awesomeOscillator: calculateAwesomeOscillator(highPrices, lowPrices, settings.awesomeOscillator.fast, settings.awesomeOscillator.slow),\n    ichimokuCloud: calculateIchimokuCloud(highPrices, lowPrices, closePrices, settings.ichimokuCloud.tenkan, settings.ichimokuCloud.kijun, settings.ichimokuCloud.senkou),\n    sma: { sma: smaResult.length > 0 ? smaResult[smaResult.length - 1] : 0 },\n    supertrendFast: calculateSupertrend(highPrices, lowPrices, closePrices, settings.supertrendFast.atrPeriod, settings.supertrendFast.multiplier),\n    supertrendSlow: calculateSupertrend(highPrices, lowPrices, closePrices, settings.supertrendSlow.atrPeriod, settings.supertrendSlow.multiplier)\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 675, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/generate-trading-signal.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview An AI agent that generates trading signals and market analysis.\n *\n * - generateTradingSignal - A function that generates trading signals and market analysis.\n * - GenerateTradingSignalInput - The input type for the generateTradingSignal function.\n * - GenerateTradingSignalOutput - The return type for the generateTradingSignal function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\nimport { getKlineData as fetchKlineData, getOrderBookData as fetchOrderBookData, getRecentTradesData as fetchRecentTradesData, getIndicatorData as fetchIndicatorData, getMarketData as fetchMarketData, analyzeOrderBook as anlyzeOrderBookUtil } from '@/lib/actions';\nimport { IndicatorSettings } from '@/lib/indicators';\n\n// #region Schemas\nconst GenerateTradingSignalInputSchema = z.object({\n  symbol: z.string().describe('The trading symbol (e.g., BTCUSDT).'),\n  timeframe: z.string().describe('The timeframe for the chart and data (e.g., 1m, 5m, 1h, 1d).'),\n  indicatorSettings: IndicatorSettings.optional().describe('The settings for the technical indicators.'),\n});\nexport type GenerateTradingSignalInput = z.infer<typeof GenerateTradingSignalInputSchema>;\n\nconst GenerateTradingSignalOutputSchema = z.object({\n  currentPrice: z.number().describe('The current price of the asset.'),\n  entryPrice: z.number().describe('The recommended entry price for the trade.'),\n  takeProfit: z.number().describe('The recommended take-profit price level.'),\n  stopLoss: z.number().describe('The recommended stop-loss price level.'),\n  signal: z.enum(['Buy', 'Sell', 'Hold']).describe('The trading signal: Buy, Sell, or Hold.'),\n  reasoning: z.string().describe('Detailed reasoning for the generated signal, based on market analysis.'),\n  confidenceLevel: z.enum(['High', 'Medium', 'Low']).describe('The confidence level of the signal.'),\n});\nexport type GenerateTradingSignalOutput = z.infer<typeof GenerateTradingSignalOutputSchema>;\n// #endregion\n\n// #region Tools\nconst getKlineData = ai.defineTool(\n    {\n        name: 'getKlineData',\n        description: 'Get candlestick (Kline) data for a given symbol and timeframe.',\n        inputSchema: z.object({ symbol: z.string(), timeframe: z.string() }),\n        outputSchema: z.any(),\n    },\n    async ({ symbol, timeframe }) => fetchKlineData(symbol, timeframe)\n);\n\nconst getOrderBookData = ai.defineTool(\n    {\n        name: 'getOrderBookData',\n        description: 'Get the order book (bids and asks) for a given symbol.',\n        inputSchema: z.object({ symbol: z.string() }),\n        outputSchema: z.any(),\n    },\n    async ({ symbol }) => fetchOrderBookData(symbol)\n);\n\nconst getRecentTradesData = ai.defineTool(\n    {\n        name: 'getRecentTradesData',\n        description: 'Get recent trades for a given symbol.',\n        inputSchema: z.object({ symbol: z.string() }),\n        outputSchema: z.any(),\n    },\n    async ({ symbol }) => fetchRecentTradesData(symbol)\n);\n\nconst getIndicatorData = ai.defineTool(\n    {\n        name: 'getIndicatorData',\n        description: 'Get a suite of technical indicators for a given symbol and timeframe.',\n        inputSchema: z.object({ \n            symbol: z.string(), \n            timeframe: z.string(),\n            settings: IndicatorSettings.optional(),\n        }),\n        outputSchema: z.any(),\n    },\n    async ({ symbol, timeframe, settings }) => fetchIndicatorData(symbol, timeframe, settings)\n);\n\nconst getMarketData = ai.defineTool(\n    {\n        name: 'getMarketData',\n        description: 'Get general market data, including the current price, for a given symbol.',\n        inputSchema: z.object({ symbol: z.string() }),\n        outputSchema: z.any(),\n    },\n    async ({ symbol }) => fetchMarketData(symbol)\n);\n\nconst analyzeOrderBook = ai.defineTool(\n    {\n        name: 'analyzeOrderBook',\n        description: 'Analyze an order book to find key support and resistance levels.',\n        inputSchema: z.any(),\n        outputSchema: z.any(),\n    },\n    async (orderBook) => anlyzeOrderBookUtil(orderBook)\n);\n// #endregion\n\nexport async function generateTradingSignal(input: GenerateTradingSignalInput): Promise<GenerateTradingSignalOutput> {\n  return generateTradingSignalFlow(input);\n}\n\nconst tradingSignalPrompt = ai.definePrompt({\n  name: 'tradingSignalPrompt',\n  output: { format: 'json', schema: GenerateTradingSignalOutputSchema },\n  tools: [getKlineData, getOrderBookData, getRecentTradesData, getIndicatorData, getMarketData, analyzeOrderBook],\n  system: `You are a world-class AI financial advisor. Your task is to generate a trading signal.\n  \n  To do this, you must gather all necessary market data using the provided tools. Your analysis must be comprehensive, taking into account candlestick patterns, order book depth, recent trade activity, a suite of technical indicators, and key support/resistance levels that you derive from the order book.\n\n  Based on your analysis, you will formulate a clear, actionable trading signal. This includes:\n  1.  **Signal**: Determine whether to 'Buy', 'Sell', or 'Hold'.\n  2.  **Current Price**: Get the current price using the getMarketData tool.\n  3.  **Entry Price**: Suggest a specific price at which to enter the trade.\n  4.  **Take Profit (TP)**: A price at which to close the position for a profit.\n  5.  **Stop Loss (SL)**: A price at which to close the position to limit losses.\n  6.  **Reasoning**: Provide a detailed explanation for your signal, referencing the specific data points you've gathered (e.g., \"RSI is overbought,\" \"Significant support at $48,000 shown in order book,\" \"A bearish engulfing pattern is forming\").\n  7.  **Confidence Level**: Rate your confidence in this signal as 'High', 'Medium', or 'Low'.\n\n  Your final output must be a single JSON object that conforms to the specified output schema. Do not output anything else.`,\n});\n\nconst generateTradingSignalFlow = ai.defineFlow(\n  {\n    name: 'generateTradingSignalFlow',\n    inputSchema: GenerateTradingSignalInputSchema,\n    outputSchema: GenerateTradingSignalOutputSchema,\n  },\n  async (input) => {\n    const { output } = await tradingSignalPrompt({\n        prompt: `Generate a trading signal for ${input.symbol} on the ${input.timeframe} timeframe. The user has provided the following indicator settings, which you should use if you decide to call the getIndicatorData tool: ${JSON.stringify(input.indicatorSettings)}`,\n    });\n    \n    return output!;\n  }\n);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 825, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/bybit-api.ts"],"sourcesContent":["'use server';\n\n// Types\nexport type TickerInfo = {\n  lastPrice: string;\n  highPrice24h: string;\n  lowPrice24h: string;\n  turnover24h: string; // Volume in quote currency (USDT)\n  volume24h: string; // Volume in base currency (e.g., BTC)\n  price24hPcnt: string; // 24h price change percentage\n};\n\nexport type OrderBookEntry = [string, string]; // [price, size]\nexport type OrderBook = {\n  bids: OrderBookEntry[];\n  asks: OrderBookEntry[];\n  ts: string; // Orderbook timestamp\n};\n\nexport type RecentTrade = {\n  execId: string;\n  execTime: string | number;\n  price: string;\n  qty: string;\n  side: 'Buy' | 'Sell';\n  isBlockTrade?: boolean; // Whether it's a block trade\n};\n\nexport type KlineEntry = [\n  string, // Start time\n  string, // Open\n  string, // High\n  string, // Low\n  string, // Close\n  string, // Volume\n  string, // Turnover\n  string? // Optional: Confirm flag (1 if the kline is closed)\n];\n\n// Constants\nconst BYBIT_API_URL = 'https://api.bybit.com';\nconst DEFAULT_REQUEST_TIMEOUT = 10000; // 10 seconds\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY_MS = 1000;\n\n// API Response Types\ninterface ApiResponse<T> {\n  retCode: number;\n  retMsg: string;\n  result: T;\n  time: number;\n}\n\n// Enhanced fetch function with retry logic and timeout\nasync function fetchFromBybit<T>(\n  endpoint: string, \n  params: Record<string, string> = {}, \n  options: RequestInit = {}\n): Promise<T | null> {\n  const url = new URL(endpoint, BYBIT_API_URL);\n  url.search = new URLSearchParams(params).toString();\n  \n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), DEFAULT_REQUEST_TIMEOUT);\n  \n  const fetchOptions: RequestInit = {\n    cache: 'no-store',\n    signal: options.signal || controller.signal, // Use provided signal or internal timeout signal\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    ...options\n  };\n\n  let retryCount = 0;\n  \n  while (retryCount <= MAX_RETRIES) {\n    try {\n      const response = await fetch(url.toString(), fetchOptions);\n      clearTimeout(timeoutId); // Clear timeout once response is received\n      \n      if (!response.ok) {\n        throw new Error(`Bybit API error: ${response.status} ${response.statusText}`);\n      }\n      \n      const data: ApiResponse<T> = await response.json();\n      \n      if (data.retCode !== 0) {\n        throw new Error(`Bybit API error: ${data.retMsg} (Code: ${data.retCode})`);\n      }\n      \n      return data.result;\n    } catch (error) {\n      clearTimeout(timeoutId);\n      \n      // Don't retry on abort errors or if we've reached max retries\n      if (error instanceof Error && error.name === 'AbortError') {\n        console.error(`Request to ${endpoint} timed out or was aborted`);\n        return null;\n      }\n      \n      if (retryCount === MAX_RETRIES) {\n        console.error(`Failed to fetch from Bybit endpoint ${endpoint} after ${MAX_RETRIES} retries:`, error);\n        return null;\n      }\n      \n      // Exponential backoff\n      const delay = RETRY_DELAY_MS * Math.pow(2, retryCount);\n      console.warn(`Retry ${retryCount + 1}/${MAX_RETRIES} for ${endpoint} in ${delay}ms`);\n      \n      await new Promise(resolve => setTimeout(resolve, delay));\n      retryCount++;\n    }\n  }\n  \n  return null;\n}\n\n// Get ticker information with enhanced error handling\nexport async function getTicker(symbol: string): Promise<TickerInfo | null> {\n  try {\n    const result = await fetchFromBybit<any>('/v5/market/tickers', { \n      category: 'spot', \n      symbol \n    });\n    \n    if (!result || !result.list || result.list.length === 0) {\n      console.warn(`No ticker data found for symbol: ${symbol}`);\n      return null;\n    }\n    \n    // Extract and validate the ticker data\n    const ticker = result.list[0];\n    \n    // Validate required fields\n    const requiredFields = ['lastPrice', 'highPrice24h', 'lowPrice24h', 'turnover24h', 'volume24h'];\n    for (const field of requiredFields) {\n      if (ticker[field] === undefined || ticker[field] === null) {\n        console.warn(`Missing required field ${field} in ticker data for ${symbol}`);\n        return null;\n      }\n    }\n    \n    return {\n      lastPrice: ticker.lastPrice,\n      highPrice24h: ticker.highPrice24h,\n      lowPrice24h: ticker.lowPrice24h,\n      turnover24h: ticker.turnover24h,\n      volume24h: ticker.volume24h,\n      price24hPcnt: ticker.price24hPcnt || '0',\n    };\n  } catch (error) {\n    console.error(`Error fetching ticker for ${symbol}:`, error);\n    return null;\n  }\n}\n\n// Get order book with timestamp and validation\nexport async function getOrderBook(symbol: string, limit: number = 20): Promise<OrderBook | null> {\n  try {\n    const result = await fetchFromBybit<any>('/v5/market/orderbook', { \n      category: 'spot', \n      symbol, \n      limit: limit.toString() \n    });\n    \n    if (!result) {\n      console.warn(`No orderbook data found for symbol: ${symbol}`);\n      return null;\n    }\n    \n    // Validate the orderbook structure\n    if (!result.b || !result.a || !Array.isArray(result.b) || !Array.isArray(result.a)) {\n      console.warn(`Invalid orderbook structure for symbol: ${symbol}`);\n      return null;\n    }\n    \n    // Ensure bids and asks are properly formatted\n    const bids = result.b.filter((entry: any) => \n      Array.isArray(entry) && entry.length === 2 && entry[0] && entry[1]\n    ) as OrderBookEntry[];\n    \n    const asks = result.a.filter((entry: any) => \n      Array.isArray(entry) && entry.length === 2 && entry[0] && entry[1]\n    ) as OrderBookEntry[];\n    \n    return {\n      bids,\n      asks,\n      ts: result.ts || Date.now().toString(),\n    };\n  } catch (error) {\n    console.error(`Error fetching orderbook for ${symbol}:`, error);\n    return null;\n  }\n}\n\n// Get recent trades with enhanced filtering\nexport async function getRecentTrades(\n  symbol: string, \n  limit: number = 30, \n  options: RequestInit = {}\n): Promise<RecentTrade[]> {\n  try {\n    const result = await fetchFromBybit<any>(\n      '/v5/market/recent-trade', \n      { \n        category: 'spot', \n        symbol, \n        limit: limit.toString() \n      }, \n      options\n    );\n    \n    if (!result || !result.list || !Array.isArray(result.list)) {\n      return [];\n    }\n    \n    // Filter and validate trade data\n    return result.list\n      .filter((trade: any) => {\n        return trade.execId && trade.execTime && trade.price && trade.qty && \n               (trade.side === 'Buy' || trade.side === 'Sell');\n      })\n      .map((trade: any) => ({\n        execId: trade.execId,\n        execTime: trade.execTime,\n        price: trade.price,\n        qty: trade.qty,\n        side: trade.side as 'Buy' | 'Sell',\n        isBlockTrade: trade.isBlockTrade || false,\n      }));\n  } catch (error) {\n    if (!(error instanceof Error && error.name === 'AbortError')) {\n      console.error(`Error fetching recent trades for ${symbol}:`, error);\n    }\n    return [];\n  }\n}\n\n// Get kline/candlestick data with interval mapping and validation\nexport async function getKline(\n  symbol: string, \n  interval: string, \n  limit: number = 100\n): Promise<KlineEntry[] | null> {\n  try {\n    // Map user-friendly intervals to Bybit format\n    const intervalMap: Record<string, string> = {\n      '1m': '1',\n      '5m': '5',\n      '15m': '15',\n      '30m': '30',\n      '1h': '60',\n      '2h': '120',\n      '4h': '240',\n      '6h': '360',\n      '12h': '720',\n      '1d': 'D',\n      '1w': 'W',\n      '1M': 'M',\n    };\n    \n    const bybitInterval = intervalMap[interval] || interval;\n    \n    const result = await fetchFromBybit<any>('/v5/market/kline', { \n      category: 'spot', \n      symbol, \n      interval: bybitInterval, \n      limit: limit.toString() \n    });\n    \n    if (!result || !result.list || !Array.isArray(result.list)) {\n      console.warn(`No kline data found for symbol: ${symbol} with interval: ${interval}`);\n      return null;\n    }\n    \n    // Validate and format kline entries\n    return result.list\n      .filter((entry: any) => {\n        return Array.isArray(entry) && entry.length >= 7 && \n               entry.every((val: any) => val !== null && val !== undefined);\n      })\n      .map((entry: any) => entry.slice(0, 7) as KlineEntry);\n  } catch (error) {\n    console.error(`Error fetching kline data for ${symbol} with interval ${interval}:`, error);\n    return null;\n  }\n}\n\n// New function to get multiple symbols data at once\nexport async function getTickers(symbols: string[]): Promise<Record<string, TickerInfo>> {\n  const results: Record<string, TickerInfo> = {};\n  \n  // Use Promise.allSettled to handle partial failures\n  const promises = symbols.map(async (symbol) => {\n    const ticker = await getTicker(symbol);\n    return { symbol, ticker };\n  });\n  \n  const settledResults = await Promise.allSettled(promises);\n  \n  settledResults.forEach((result) => {\n    if (result.status === 'fulfilled' && result.value.ticker) {\n      const { symbol, ticker } = result.value;\n      results[symbol] = ticker;\n    }\n  });\n  \n  return results;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1060, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["'use server';\n\nimport { generateTradingSignal, type GenerateTradingSignalOutput } from '@/ai/flows/generate-trading-signal';\nimport { getTicker, getOrderBook, getKline, type OrderBook, type TickerInfo, type KlineEntry } from '@/lib/bybit-api';\nimport { calculateIndicators, type IndicatorData, type IndicatorSettings, defaultIndicatorSettings } from '@/lib/indicators';\n\nexport type AiSignalResponse = GenerateTradingSignalOutput;\n\nexport async function getAiTradingSignal(symbol: string, timeframe: string, indicatorSettings?: IndicatorSettings): Promise<{ success: boolean, analysis?: AiSignalResponse, error?: string }> {\n  try {\n    const result = await generateTradingSignal({ symbol, timeframe, indicatorSettings });\n    return { success: true, analysis: result };\n  } catch (error) {\n    console.error('Error generating AI trading signal:', error);\n    const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred.';\n    return { success: false, error: errorMessage };\n  }\n}\n\nexport async function getMarketData(symbol: string): Promise<TickerInfo | null> {\n    return getTicker(symbol);\n}\n\nexport async function getOrderBookData(symbol: string): Promise<OrderBook | null> {\n    return getOrderBook(symbol);\n}\n\nexport async function getKlineData(symbol: string, interval: string): Promise<KlineEntry[] | null> {\n    return getKline(symbol, interval);\n}\n\nexport async function getIndicatorData(symbol: string, timeframe: string, settings: IndicatorSettings = defaultIndicatorSettings): Promise<IndicatorData | null> {\n    const klineData = await getKline(symbol, timeframe);\n    if (!klineData) return null;\n    // Data is from newest to oldest, reverse to have oldest first\n    const reversedKline = [...klineData].reverse();\n    const closePrices = reversedKline.map(k => parseFloat(k[4]));\n    const highPrices = reversedKline.map(k => parseFloat(k[2]));\n    const lowPrices = reversedKline.map(k => parseFloat(k[3]));\n    const volumes = reversedKline.map(k => parseFloat(k[5]));\n    return calculateIndicators(closePrices, highPrices, lowPrices, volumes, settings);\n}\n\n// Order Book Analysis\nexport async function analyzeOrderBook(orderBook: OrderBook) {\n  const bids = orderBook.bids.map(([price, size]) => ({ price: parseFloat(price), size: parseFloat(size) }));\n  const asks = orderBook.asks.map(([price, size]) => ({ price: parseFloat(price), size: parseFloat(size) }));\n\n  const findLevels = (orders: { price: number; size: number }[], count: number) => {\n    // Sort by size descending\n    const sorted = [...orders].sort((a, b) => b.size - a.size);\n    // Return the prices of the top `count` orders\n    return sorted.slice(0, count).map(o => o.price);\n  };\n  \n  // Find the top 3 most significant support (bids) and resistance (asks) levels\n  const supportLevels = findLevels(bids, 3);\n  const resistanceLevels = findLevels(asks, 3);\n\n  return {\n    support: supportLevels,\n    resistance: resistanceLevels,\n  };\n}\n\nexport interface VolumePressureData {\n    buyVolume: number;\n    sellVolume: number;\n    totalVolume: number;\n    buyPercentage: number;\n    sellPercentage: number;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;;;;;;;AAIO,eAAe,mBAAmB,MAAc,EAAE,SAAiB,EAAE,iBAAqC;IAC/G,IAAI;QACF,MAAM,SAAS,MAAM,CAAA,GAAA,mJAAA,CAAA,wBAAqB,AAAD,EAAE;YAAE;YAAQ;YAAW;QAAkB;QAClF,OAAO;YAAE,SAAS;YAAM,UAAU;QAAO;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QACrD,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,OAAO;YAAE,SAAS;YAAO,OAAO;QAAa;IAC/C;AACF;AAEO,eAAe,cAAc,MAAc;IAC9C,OAAO,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD,EAAE;AACrB;AAEO,eAAe,iBAAiB,MAAc;IACjD,OAAO,CAAA,GAAA,0HAAA,CAAA,eAAY,AAAD,EAAE;AACxB;AAEO,eAAe,aAAa,MAAc,EAAE,QAAgB;IAC/D,OAAO,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ;AAC5B;AAEO,eAAe,iBAAiB,MAAc,EAAE,SAAiB,EAAE,WAA8B,wHAAA,CAAA,2BAAwB;IAC5H,MAAM,YAAY,MAAM,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ;IACzC,IAAI,CAAC,WAAW,OAAO;IACvB,8DAA8D;IAC9D,MAAM,gBAAgB;WAAI;KAAU,CAAC,OAAO;IAC5C,MAAM,cAAc,cAAc,GAAG,CAAC,CAAA,IAAK,WAAW,CAAC,CAAC,EAAE;IAC1D,MAAM,aAAa,cAAc,GAAG,CAAC,CAAA,IAAK,WAAW,CAAC,CAAC,EAAE;IACzD,MAAM,YAAY,cAAc,GAAG,CAAC,CAAA,IAAK,WAAW,CAAC,CAAC,EAAE;IACxD,MAAM,UAAU,cAAc,GAAG,CAAC,CAAA,IAAK,WAAW,CAAC,CAAC,EAAE;IACtD,OAAO,CAAA,GAAA,wHAAA,CAAA,sBAAmB,AAAD,EAAE,aAAa,YAAY,WAAW,SAAS;AAC5E;AAGO,eAAe,iBAAiB,SAAoB;IACzD,MAAM,OAAO,UAAU,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,KAAK,GAAK,CAAC;YAAE,OAAO,WAAW;YAAQ,MAAM,WAAW;QAAM,CAAC;IACxG,MAAM,OAAO,UAAU,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,KAAK,GAAK,CAAC;YAAE,OAAO,WAAW;YAAQ,MAAM,WAAW;QAAM,CAAC;IAExG,MAAM,aAAa,CAAC,QAA2C;QAC7D,0BAA0B;QAC1B,MAAM,SAAS;eAAI;SAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI;QACzD,8CAA8C;QAC9C,OAAO,OAAO,KAAK,CAAC,GAAG,OAAO,GAAG,CAAC,CAAA,IAAK,EAAE,KAAK;IAChD;IAEA,8EAA8E;IAC9E,MAAM,gBAAgB,WAAW,MAAM;IACvC,MAAM,mBAAmB,WAAW,MAAM;IAE1C,OAAO;QACL,SAAS;QACT,YAAY;IACd;AACF;;;IAvDsB;IAWA;IAIA;IAIA;IAIA;IAaA;;AApCA,+OAAA;AAWA,+OAAA;AAIA,+OAAA;AAIA,+OAAA;AAIA,+OAAA;AAaA,+OAAA","debugId":null}},
    {"offset": {"line": 1167, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getMarketData as '40ecf96ec3829da1facb2822b20b7b6fb2faedc074'} from 'ACTIONS_MODULE0'\nexport {getOrderBookData as '404bceabf4524442855236b92fdc7049a3e2aa0d9e'} from 'ACTIONS_MODULE0'\nexport {getAiTradingSignal as '70c6125dbbad3595350503c517b30b35b439281e36'} from 'ACTIONS_MODULE0'\nexport {getIndicatorData as '70901addb4aa828fa13a5df1151b80af96986e9baf'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","debugId":null}},
    {"offset": {"line": 1242, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgQ,GAC7R,8BACA","debugId":null}},
    {"offset": {"line": 1256, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}